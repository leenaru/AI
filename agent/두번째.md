ë§ì”€í•´ì£¼ì‹  ë‚´ìš©ì„ ë°˜ì˜í•˜ì—¬ **1ë²ˆ LangGraph ê¸°ë°˜ ë©€í‹°í„´ ëŒ€í™” íë¦„ ì„¤ê³„** í•­ëª©ì„ ë‹¤ìŒê³¼ ê°™ì´ ë³´ê°•í•´ë³´ì•˜ìŠµë‹ˆë‹¤:

---

### âœ… 1. LangGraph ê¸°ë°˜ ë©€í‹°í„´ ëŒ€í™” íë¦„ ì„¤ê³„ (ë³´ê°• ë²„ì „)

LangGraphë¥¼ í™œìš©í•˜ì—¬ **ìƒíƒœ ê¸°ë°˜ì˜ ìœ ì—°í•œ ëŒ€í™” íë¦„**ì„ ì„¤ê³„í•˜ë©°, ì‚¬ìš©ìì˜ ëª©ì ê³¼ ìš”ì²­ ìœ í˜•ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì€ íë¦„ì„ êµ¬í˜„í•©ë‹ˆë‹¤:

#### ğŸ”¹ 1-1. ëª©ì  ì§€í–¥í˜• ëŒ€í™” (Intent-based Task ìˆ˜í–‰)

* ì‚¬ìš©ìê°€ íŠ¹ì • **ëª©ì **ì„ ê°€ì§€ê³  ì‹œìŠ¤í…œì— ì ‘ê·¼í•˜ëŠ” ê²½ìš°(ì˜ˆ: ìë™ì°¨ ë“±ë¡, ì¥ì¹˜ ì—°ê²°, ì˜ˆì•½ ë“±),
  **ì‚¬ì „ì— ì •ì˜ëœ í•„ìˆ˜ ì •ë³´ë“¤**(parameters, context ë“±)ì„ ê¸°ë°˜ìœ¼ë¡œ íƒœìŠ¤í¬ ì‹¤í–‰ì„ ì¤€ë¹„í•©ë‹ˆë‹¤.
* ì‚¬ìš©ìê°€ í•´ë‹¹ ì •ë³´ì˜ ì¼ë¶€ë¥¼ ëˆ„ë½í•œ ê²½ìš°, LangGraphì˜ ë¶„ê¸° ì¡°ê±´ì„ í™œìš©í•˜ì—¬ \*\*ì—°ì†ì ì¸ ì§ˆë¬¸(ë©€í‹°í„´)\*\*ì„ í†µí•´ ëˆ„ë½ëœ ì •ë³´ë¥¼ í™•ë³´í•©ë‹ˆë‹¤.
* ëª¨ë“  í•„ìˆ˜ ì •ë³´ê°€ ìˆ˜ì§‘ë˜ë©´, í•´ë‹¹ íƒœìŠ¤í¬ ë˜ëŠ” ì„œë¹„ìŠ¤ ì‹¤í–‰ ë‹¨ê³„ë¡œ ì „ì´ë©ë‹ˆë‹¤.

#### ğŸ”¹ 1-2. ë¬¸ì œ í•´ê²°í˜• ëŒ€í™” (Troubleshooting/Help Request)

* ì‚¬ìš©ìê°€ ì‹œìŠ¤í…œì˜ ë¬¸ì œë‚˜ ì˜¤ë¥˜ì— ëŒ€í•œ **ë„ì›€ì„ ìš”ì²­**í•˜ëŠ” ê²½ìš°,
  í•´ë‹¹ ë¬¸ì œ ìœ í˜•ë³„ë¡œ ì •ì˜ëœ í•„ìˆ˜ ì •ë³´ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ íšë“í•´ì•¼ í•©ë‹ˆë‹¤.
* ì •ë³´ê°€ ì¶©ë¶„íˆ ìˆ˜ì§‘ëœ ê²½ìš°:

  * RAGë‚˜ ì‚¬ì „ ì§€ì‹ ê¸°ë°˜(LLM + Vector DB ë“±)ì„ í†µí•´ **ì¦‰ì‹œ í•´ë‹µì„ ì œì‹œ**
* ì •ë³´ê°€ ë¶€ì¡±í•˜ê±°ë‚˜, ì ì ˆí•œ í•´ë‹µì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ê²½ìš°:

  * **ì¶”ê°€ ì •ë³´ ìš”ì²­ ì ˆì°¨ë¡œ ì „í™˜**
  * ìµœì¢…ì ìœ¼ë¡œëŠ” ì˜¤ë¥˜ ë¦¬í¬íŠ¸ ìƒì„± â†’ **ë‹´ë‹¹ìì—ê²Œ ì „ë‹¬**ë˜ë©°,
    ë‹´ë‹¹ìê°€ ì‘ë‹µí•œ í•´ê²° ë°©ì•ˆì€ ì´í›„ RAG/DBì— ì €ì¥ë˜ì–´ **ìë™ ì‘ë‹µ íë¦„ì— í†µí•©**ë©ë‹ˆë‹¤.

#### ğŸ”¹ 1-3. ëŒ€í™” íë¦„ì˜ íŠ¹ì§•

* ê° ìƒíƒœëŠ” LangGraphì˜ Stateë¡œ ê´€ë¦¬ë˜ë©°,

  * `ì •ë³´ ìˆ˜ì§‘ ìƒíƒœ`
  * `ì •ë³´ ë¶€ì¡± â†’ ì§ˆë¬¸ ë°˜ë³µ ìƒíƒœ`
  * `ì¡°ê±´ ë§Œì¡± ì‹œ â†’ ì‹¤í–‰ ìƒíƒœ`
  * `ì˜¤ë¥˜ ë¦¬í¬íŠ¸ ìƒì„± ìƒíƒœ`
  * `ì‚¬ìš©ì ëŒ€ê¸° ìƒíƒœ`
  * `í›„ì† ì‘ë‹µ ìˆ˜ì‹  ë° í•™ìŠµ ìƒíƒœ` ë“±ìœ¼ë¡œ êµ¬ì„±
* ì‚¬ìš©ì ì…ë ¥ì€ Intent Classifier (Ollama ê¸°ë°˜)ì™€ Slot Filling ëª¨ë“ˆì„ í†µí•´ ë¶„ì„ë¨
* ëŒ€í™” ì¤‘ ì–¸ì œë“ ì§€ ìƒíƒœ ì „ì´ ì¡°ê±´ì´ ì¶©ì¡±ë˜ë©´, ìë™ìœ¼ë¡œ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì´ë™

---

ì´ êµ¬ì¡°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ GUIì—ì„œ **ì‹œë‚˜ë¦¬ì˜¤ íë¦„ë„**ë¥¼ ì„¤ê³„í•˜ë©´, ì‹œë‚˜ë¦¬ì˜¤ ë¡œì§ì´ í•œëˆˆì— ë“¤ì–´ì˜¤ê³  ìœ ì§€ë³´ìˆ˜ë‚˜ í™•ì¥ë„ ë§¤ìš° ìš©ì´í•©ë‹ˆë‹¤.
ë§Œì•½ í•„ìš”í•˜ì‹œë‹¤ë©´, ì´ êµ¬ì¡°ì— ê¸°ë°˜í•œ LangGraph ì˜ˆì‹œ YAML ë˜ëŠ” JSON ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‘ì„±í•´ë“œë¦´ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

---

ì¶”ê°€ë¡œ ë³´ì™„í•˜ê³  ì‹¶ì€ ì‚¬í•­ì´ ìˆìœ¼ì‹¤ê¹Œìš”?
í˜¹ì€ ì´ êµ¬ì¡°ë¥¼ ì‹¤ì œ YAML + GUIë¡œ êµ¬í˜„í•œ ì˜ˆì‹œë¥¼ ì›í•˜ì‹ ë‹¤ë©´ í•¨ê»˜ ì§„í–‰í•´ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

>>> ì´ êµ¬ì¡°ì— ê¸°ë°˜í•œ LangGraph ì˜ˆì‹œ YAML ë˜ëŠ” JSON ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‘ì„±í•´ì¤˜

ë¬¼ë¡ ì…ë‹ˆë‹¤. ì•„ë˜ëŠ” ì‚¬ìš©ìê°€ ëª©ì ì„ ê°€ì§€ê³  ì‹œìŠ¤í…œì— ì ‘ê·¼í–ˆì„ ë•Œ, **í•„ìˆ˜ ì •ë³´ë¥¼ ë©€í‹°í„´ ëŒ€í™”ë¡œ ìˆ˜ì§‘**í•˜ê³ ,
**ë¬¸ì œ í•´ê²°** í˜¹ì€ **íƒœìŠ¤í¬ ìˆ˜í–‰** íë¦„ì„ LangGraph ìŠ¤íƒ€ì¼ë¡œ í‘œí˜„í•œ **YAML ì‹œë‚˜ë¦¬ì˜¤ ì˜ˆì‹œ**ì…ë‹ˆë‹¤.

---

### âœ… ì‹œë‚˜ë¦¬ì˜¤: ì°¨ëŸ‰ ë“±ë¡ ìš”ì²­ ë° ì˜¤ë¥˜ ë¦¬í¬íŠ¸ íë¦„ (LangGraph YAML ìŠ¤íƒ€ì¼)

```yaml
id: vehicle_registration_support
version: 1.0
description: ì‚¬ìš©ìì˜ ì°¨ëŸ‰ ë“±ë¡ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë©€í‹°í„´ ëŒ€í™” íë¦„. í•„ìˆ˜ ì •ë³´ ìˆ˜ì§‘ ë° ì˜¤ë¥˜ ëŒ€ì‘ í¬í•¨.

states:
  start:
    type: start
    next: detect_intent

  detect_intent:
    type: task
    function: detect_intent
    next:
      register_vehicle: check_required_info
      report_issue: gather_issue_info
      default: fallback

  check_required_info:
    type: task
    function: check_vehicle_info_slots
    next:
      complete: perform_registration
      incomplete: request_missing_info

  request_missing_info:
    type: task
    function: ask_missing_info
    next: check_required_info

  perform_registration:
    type: task
    function: register_vehicle_api
    next: success_or_failure

  success_or_failure:
    type: task
    function: check_registration_result
    next:
      success: end_success
      failure: report_error

  gather_issue_info:
    type: task
    function: collect_troubleshooting_info
    next:
      sufficient_info: resolve_or_ask
      insufficient_info: ask_additional_details

  ask_additional_details:
    type: task
    function: ask_more_troubleshooting_questions
    next: gather_issue_info

  resolve_or_ask:
    type: task
    function: query_rag_for_solution
    next:
      solution_found: end_success
      no_solution: escalate_to_human

  report_error:
    type: task
    function: create_error_report
    next: end_reported

  escalate_to_human:
    type: task
    function: escalate_to_human_operator
    next: wait_for_response

  wait_for_response:
    type: wait
    timeout: 6h
    next: update_knowledge_base

  update_knowledge_base:
    type: task
    function: save_human_answer_to_kb
    next: end_success

  fallback:
    type: task
    function: handle_unrecognized_intent
    next: end_fallback

  end_success:
    type: end
    result: success

  end_reported:
    type: end
    result: issue_reported

  end_fallback:
    type: end
    result: fallback
```

---

### ğŸ§  ê¸°ëŠ¥ ì„¤ëª… ìš”ì•½

| ìƒíƒœ ì´ë¦„                                         | ì„¤ëª…                                      |
| --------------------------------------------- | --------------------------------------- |
| `detect_intent`                               | ì‚¬ìš©ìì˜ ë°œí™”ë¥¼ ë¶„ì„í•˜ì—¬ ëª©ì  íŒŒì•… (ì˜ˆ: ì°¨ëŸ‰ ë“±ë¡ or ë¬¸ì œ ë³´ê³ ) |
| `check_required_info`                         | ì°¨ëŸ‰ ë“±ë¡ì„ ìœ„í•´ í•„ìš”í•œ ì •ë³´ë“¤ì´ ëª¨ë‘ ìˆëŠ”ì§€ í™•ì¸            |
| `request_missing_info`                        | ëˆ„ë½ëœ ì •ë³´ê°€ ìˆë‹¤ë©´ í•˜ë‚˜ì”© ì§ˆë¬¸                      |
| `perform_registration`                        | ëª¨ë“  ì •ë³´ê°€ ëª¨ì´ë©´ ì‹¤ì œ ë“±ë¡ API í˜¸ì¶œ                 |
| `gather_issue_info`                           | ë¬¸ì œ í•´ê²° ìš”ì²­ì¼ ê²½ìš° í•„ìš”í•œ ë¬¸ì œ ìƒí™© ì •ë³´ë¥¼ ìˆ˜ì§‘           |
| `resolve_or_ask`                              | ìˆ˜ì§‘í•œ ì •ë³´ë¡œ RAGë¥¼ í†µí•´ í•´ê²° ì‹œë„                   |
| `report_error` / `escalate_to_human`          | í•´ê²°ë˜ì§€ ì•Šì„ ê²½ìš° ì˜¤ë¥˜ ë¦¬í¬íŠ¸ ìƒì„± ë˜ëŠ” ë‹´ë‹¹ìì—ê²Œ ì „ë‹¬        |
| `wait_for_response` / `update_knowledge_base` | ë‹´ë‹¹ìì˜ ë‹µë³€ ìˆ˜ì‹  í›„ ì§€ì‹ë² ì´ìŠ¤ì— ì €ì¥                  |

---

### âœ… ì°¸ê³  ì‚¬í•­

* ì´ êµ¬ì¡°ëŠ” FastAPI, Ollama, LangGraph SDK ë“±ì„ í†µí•´ ì‰½ê²Œ Python ì½”ë“œë¡œ ì „í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* í•„ìš”í•œ ê²½ìš° JSON ë²„ì „ë„ ì œê³µí•´ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* GUIìš© ReactFlowì—ì„œ `states` ê°ê°ì„ ë…¸ë“œë¡œ ì‹œê°í™”í•  ìˆ˜ ìˆìœ¼ë©°, `next`ëŠ” ì—£ì§€ë¡œ ì²˜ë¦¬í•˜ë©´ ë©ë‹ˆë‹¤.

---

JSON ë²„ì „ì´ë‚˜ Python LangGraph ì½”ë“œë¡œ ë³€í™˜í•´ë“œë¦´ê¹Œìš”?
í˜¹ì€ ì´ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ GUIì—ì„œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë„ë¡ í¬ë§·íŒ…í•´ë“œë¦´ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

---

>>> ì•„ë‹ˆ json ë§ê³  YAML êµ¬ì¡°ë¥¼ Python LangGraph ì½”ë“œë¡œ ë³€í™˜í•´ì¤˜. ê·¸ë¦¬ê³  ollamaë¥¼ ì‚¬ìš©í•´ì„œ llm ê³¼ ì—°ê³„í•´ì¤˜

ì¢‹ìŠµë‹ˆë‹¤. ì•„ë˜ì— ìš”ì²­í•˜ì‹  ë‚´ìš©ëŒ€ë¡œ,

---

## âœ… ëª©ì 

* YAML ê¸°ë°˜ LangGraph ì‹œë‚˜ë¦¬ì˜¤ êµ¬ì¡°ë¥¼ **Python ì½”ë“œ**ë¡œ ë³€í™˜
* **Ollama ê¸°ë°˜ LLM**ì„ ì—°ë™í•˜ì—¬ `detect_intent`, `ask_missing_info`, `query_rag_for_solution` ë“±ì˜ ë…¸ë“œì— **LLM ê¸°ëŠ¥ì„ í†µí•©**

---

## âœ… êµ¬í˜„ ê°œìš”

* `LangGraph`: ìƒíƒœ ê¸°ë°˜ ëŒ€í™” íë¦„ ê´€ë¦¬
* `Ollama`: LLM ì§ˆì˜ ë° ì‘ë‹µ ì²˜ë¦¬
* Python í•¨ìˆ˜ë¡œ LangGraph ë…¸ë“œ ë¡œì§ êµ¬ì„±

---

## âœ… Python LangGraph ì½”ë“œ + Ollama ì—°ë™ ì˜ˆì‹œ

```python
from langgraph.graph import StateGraph, END
from typing import TypedDict, Literal, Optional
import ollama

# ğŸŒŸ 1. ìƒíƒœ ì •ì˜
class ConversationState(TypedDict, total=False):
    intent: Optional[str]
    info_status: Optional[Literal["complete", "incomplete"]]
    result: Optional[Literal["success", "failure"]]
    rag_result: Optional[Literal["solution_found", "no_solution"]]
    collected_info: dict
    user_input: str

# ğŸŒŸ 2. LLM with Ollama
def ask_llm(prompt: str) -> str:
    response = ollama.chat(model='llama3', messages=[{"role": "user", "content": prompt}])
    return response['message']['content']

# ğŸŒŸ 3. ë…¸ë“œ í•¨ìˆ˜ ì •ì˜

def detect_intent(state: ConversationState) -> ConversationState:
    prompt = f"ë‹¤ìŒ ì‚¬ìš©ìì˜ ìš”ì²­ì—ì„œ ì˜ë„ë¥¼ ì¶”ë¡ í•´ì¤˜:\n\n'{state['user_input']}'\n\nì˜ë„ëŠ” 'register_vehicle' ë˜ëŠ” 'report_issue' ì¤‘ í•˜ë‚˜ì•¼."
    intent = ask_llm(prompt).strip().lower()
    state["intent"] = intent if intent in ["register_vehicle", "report_issue"] else "default"
    return state

def check_vehicle_info_slots(state: ConversationState) -> ConversationState:
    required = ["ì°¨ëŸ‰ë²ˆí˜¸", "ì†Œìœ ìëª…", "ì°¨ì¢…"]
    provided = state.get("collected_info", {})
    missing = [r for r in required if r not in provided]
    state["info_status"] = "complete" if not missing else "incomplete"
    state["missing_fields"] = missing
    return state

def ask_missing_info(state: ConversationState) -> ConversationState:
    missing = state.get("missing_fields", [])
    question = f"ë‹¤ìŒ ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤: {', '.join(missing)}. ê° í•­ëª©ì— ëŒ€í•´ ë‹µí•´ì£¼ì„¸ìš”."
    response = ask_llm(question)
    # ì•„ì£¼ ë‹¨ìˆœí•œ íŒŒì‹± ì˜ˆì‹œ
    state["collected_info"].update({field: "ì„ì˜ê°’" for field in missing})
    return state

def register_vehicle_api(state: ConversationState) -> ConversationState:
    # ì‹¤ì œ API ì—°ë™ ëŒ€ì‹  ì„±ê³µ ì‹œë®¬ë ˆì´ì…˜
    print("ğŸ“¦ ì°¨ëŸ‰ ë“±ë¡ ìš”ì²­:", state["collected_info"])
    state["result"] = "success"
    return state

def check_registration_result(state: ConversationState) -> ConversationState:
    return state  # resultëŠ” ì´ë¯¸ í¬í•¨ë˜ì–´ ìˆìŒ

def collect_troubleshooting_info(state: ConversationState) -> ConversationState:
    # ê°„ë‹¨í•œ ì„ì‹œ ë¡œì§
    state["info_status"] = "sufficient_info" if "ì—ëŸ¬ì½”ë“œ" in state["user_input"] else "insufficient_info"
    return state

def ask_more_troubleshooting_questions(state: ConversationState) -> ConversationState:
    state["user_input"] += " ì—ëŸ¬ì½”ë“œ: P001"
    return state

def query_rag_for_solution(state: ConversationState) -> ConversationState:
    prompt = f"ë¬¸ì œ: {state['user_input']}\n\nì´ ë¬¸ì œì— ëŒ€í•œ í•´ê²°ì±…ì´ ìˆë‚˜ìš”?"
    answer = ask_llm(prompt)
    state["rag_result"] = "solution_found" if "í•´ê²°" in answer else "no_solution"
    return state

def create_error_report(state: ConversationState) -> ConversationState:
    print("ğŸš¨ ì˜¤ë¥˜ ë¦¬í¬íŠ¸ ìƒì„±:", state["user_input"])
    return state

def escalate_to_human_operator(state: ConversationState) -> ConversationState:
    print("ğŸ™‹ ë‹´ë‹¹ìì—ê²Œ ì „ë‹¬ë¨")
    return state

def save_human_answer_to_kb(state: ConversationState) -> ConversationState:
    print("ğŸ“š ì¸ê°„ ë‹´ë‹¹ìì˜ ë‹µë³€ì„ KBì— ì €ì¥í•¨")
    return state

def handle_unrecognized_intent(state: ConversationState) -> ConversationState:
    print("â“ ì•Œ ìˆ˜ ì—†ëŠ” ìš”ì²­ì…ë‹ˆë‹¤.")
    return state

# ğŸŒŸ 4. ê·¸ë˜í”„ êµ¬ì„±
builder = StateGraph(ConversationState)

builder.set_entry_point("detect_intent")

builder.add_node("detect_intent", detect_intent)
builder.add_node("check_required_info", check_vehicle_info_slots)
builder.add_node("request_missing_info", ask_missing_info)
builder.add_node("perform_registration", register_vehicle_api)
builder.add_node("success_or_failure", check_registration_result)
builder.add_node("gather_issue_info", collect_troubleshooting_info)
builder.add_node("ask_additional_details", ask_more_troubleshooting_questions)
builder.add_node("resolve_or_ask", query_rag_for_solution)
builder.add_node("report_error", create_error_report)
builder.add_node("escalate_to_human", escalate_to_human_operator)
builder.add_node("update_knowledge_base", save_human_answer_to_kb)
builder.add_node("fallback", handle_unrecognized_intent)

builder.add_conditional_edges(
    "detect_intent",
    lambda state: state["intent"],
    {
        "register_vehicle": "check_required_info",
        "report_issue": "gather_issue_info",
        "default": "fallback",
    },
)

builder.add_conditional_edges(
    "check_required_info",
    lambda state: state["info_status"],
    {
        "complete": "perform_registration",
        "incomplete": "request_missing_info",
    },
)

builder.add_edge("request_missing_info", "check_required_info")
builder.add_edge("perform_registration", "success_or_failure")

builder.add_conditional_edges(
    "success_or_failure",
    lambda state: state["result"],
    {
        "success": END,
        "failure": "report_error",
    },
)

builder.add_conditional_edges(
    "gather_issue_info",
    lambda state: state["info_status"],
    {
        "sufficient_info": "resolve_or_ask",
        "insufficient_info": "ask_additional_details",
    },
)

builder.add_edge("ask_additional_details", "gather_issue_info")

builder.add_conditional_edges(
    "resolve_or_ask",
    lambda state: state["rag_result"],
    {
        "solution_found": END,
        "no_solution": "escalate_to_human",
    },
)

builder.add_edge("report_error", END)
builder.add_edge("escalate_to_human", "update_knowledge_base")
builder.add_edge("update_knowledge_base", END)
builder.add_edge("fallback", END)

# ğŸŒŸ 5. ê·¸ë˜í”„ ì»´íŒŒì¼
app = builder.compile()
```

---

## âœ… ì‹¤í–‰ ì˜ˆì‹œ

```python
initial_state = ConversationState(
    user_input="ì°¨ëŸ‰ì„ ë“±ë¡í•˜ê³  ì‹¶ì–´ìš”. ì°¨ëŸ‰ë²ˆí˜¸ëŠ” 12ê°€1234ì˜ˆìš”.",
    collected_info={"ì°¨ëŸ‰ë²ˆí˜¸": "12ê°€1234"}
)

final_state = app.invoke(initial_state)
print("âœ… ìµœì¢… ìƒíƒœ:", final_state)
```

---

## âœ… ìš”ì•½

| í•­ëª©           | ë‚´ìš©                                        |
| ------------ | ----------------------------------------- |
| ğŸ“Œ ì‹œë‚˜ë¦¬ì˜¤      | ì°¨ëŸ‰ ë“±ë¡ ë˜ëŠ” ë¬¸ì œ í•´ê²° ìš”ì²­                         |
| ğŸ§  LLM       | `ollama.chat()`ìœ¼ë¡œ ì˜ë„ ë¶„ì„, ì§ˆë¬¸ ìƒì„±, RAG ì‘ë‹µ ìˆ˜í–‰ |
| ğŸ” LangGraph | ìƒíƒœ ê¸°ë°˜ ë¶„ê¸° ë° ë©€í‹°í„´ ìˆ˜ì§‘ íë¦„ êµ¬í˜„                   |
| ğŸ’¡ ì‘ìš©        | FastAPI, ëª¨ë°”ì¼ ì•±, GUI í¸ì§‘ê¸°ì™€ ì‰½ê²Œ í†µí•© ê°€ëŠ¥         |

---

í•„ìš”í•˜ì‹œë©´ ì´ ì½”ë“œë¥¼ FastAPI ì„œë²„ì— í†µí•©í•˜ê±°ë‚˜ GUIì— ë§ê²Œ ë¦¬íŒ©í† ë§í•´ë“œë¦´ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•˜ê³  ì‹¶ìœ¼ì‹  ë¶€ë¶„ì´ ìˆì„ê¹Œìš”?

---

>>> ì´ ì½”ë“œë¥¼ 
>>> 1. FastAPI ì„œë²„ì— í†µí•©
>>> 2. Android, iOS ì•±ì—ì„œ ì±„íŒ…ì•± êµ¬í˜„

ì¢‹ìŠµë‹ˆë‹¤. ìš”ì²­í•˜ì‹  ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì „ì²´ êµ¬ì¡°ë¥¼ **2ë‹¨ê³„ë¡œ ë‚˜ëˆ„ì–´** ì„¤ê³„ ë° êµ¬í˜„í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤:

---

## âœ… 1ë‹¨ê³„: LangGraph + Ollama ê¸°ë°˜ ì½”ë“œë¥¼ FastAPI ì„œë²„ì— í†µí•©

### ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡° ì˜ˆì‹œ

```
project-root/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py              # FastAPI ì§„ì…ì 
â”‚   â”œâ”€â”€ graph.py             # LangGraph ì •ì˜ ë° ì‹¤í–‰ ë¡œì§
â”‚   â”œâ”€â”€ ollama_utils.py      # Ollama LLM ìœ í‹¸ í•¨ìˆ˜
â”‚   â””â”€â”€ models.py            # ë°ì´í„° ëª¨ë¸ ì •ì˜ (Pydantic)
â”œâ”€â”€ requirements.txt
â””â”€â”€ Dockerfile               # (ì„ íƒ) ë°°í¬ìš©
```

---

### ğŸ”¹ app/ollama\_utils.py

```python
import ollama

def ask_llm(prompt: str) -> str:
    response = ollama.chat(model='llama3', messages=[{"role": "user", "content": prompt}])
    return response['message']['content']
```

---

### ğŸ”¹ app/models.py

```python
from pydantic import BaseModel
from typing import Optional, Dict, Literal

class ConversationInput(BaseModel):
    user_input: str
    collected_info: Optional[Dict[str, str]] = {}

class ConversationOutput(BaseModel):
    final_state: Dict
```

---

### ğŸ”¹ app/graph.py (LangGraph í†µí•©)

LangGraph ì •ì˜ëŠ” ì•ì„œ ì œê³µí•œ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ë˜, `invoke()` í•¨ìˆ˜ë¡œ ê°ì‹¸ë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤:

```python
from langgraph.graph import StateGraph, END
from typing import TypedDict, Literal, Optional, Dict
from .ollama_utils import ask_llm

# ìƒíƒœ ì •ì˜
class ConversationState(TypedDict, total=False):
    intent: Optional[str]
    info_status: Optional[Literal["complete", "incomplete"]]
    result: Optional[Literal["success", "failure"]]
    rag_result: Optional[Literal["solution_found", "no_solution"]]
    collected_info: dict
    user_input: str

# í•¨ìˆ˜ ì •ì˜ëŠ” ìƒëµ (ì•ì„œ ì œê³µëœ ë…¸ë“œ í•¨ìˆ˜ë“¤ ë™ì¼í•˜ê²Œ ë³µë¶™)

def build_graph():
    builder = StateGraph(ConversationState)
    builder.set_entry_point("detect_intent")
    
    # ë…¸ë“œ ì¶”ê°€ ë° ì—£ì§€ êµ¬ì„± (ìƒëµ)

    return builder.compile()

graph_app = build_graph()

def run_graph(user_input: str, collected_info: Dict[str, str]) -> Dict:
    state = ConversationState(user_input=user_input, collected_info=collected_info)
    return graph_app.invoke(state)
```

---

### ğŸ”¹ app/main.py (FastAPI ì—”ë“œí¬ì¸íŠ¸)

```python
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from app.models import ConversationInput, ConversationOutput
from app.graph import run_graph

app = FastAPI()

# CORS ì„¤ì • (ëª¨ë°”ì¼ ì•± ì—°ë™ìš©)
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # ë³´ì•ˆ ê³ ë ¤ ì‹œ ì•± ë„ë©”ì¸ìœ¼ë¡œ ì œí•œ
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

@app.post("/chat", response_model=ConversationOutput)
async def chat_with_agent(data: ConversationInput):
    result = run_graph(data.user_input, data.collected_info)
    return {"final_state": result}
```

---

## âœ… 2ë‹¨ê³„: Android & iOS ì±„íŒ…ì•± êµ¬í˜„ (ê¸°ë³¸ ì˜ˆì‹œ)

---

### ğŸ“± 2-1. Android (Kotlin + Retrofit2)

```kotlin
interface ChatService {
    @POST("/chat")
    suspend fun sendChat(@Body input: ChatRequest): ChatResponse
}

data class ChatRequest(
    val user_input: String,
    val collected_info: Map<String, String> = emptyMap()
)

data class ChatResponse(
    val final_state: Map<String, Any>
)
```

```kotlin
lifecycleScope.launch {
    val result = api.sendChat(ChatRequest("ì°¨ëŸ‰ ë“±ë¡í•˜ê³  ì‹¶ì–´ìš”.", mapOf("ì°¨ëŸ‰ë²ˆí˜¸" to "12ê°€1234")))
    val reply = result.final_state["intent"]
    textView.text = reply.toString()
}
```

---

### ğŸ 2-2. iOS (Swift + URLSession)

```swift
struct ChatRequest: Codable {
    let user_input: String
    let collected_info: [String: String]
}

struct ChatResponse: Codable {
    let final_state: [String: String]
}

func sendChat(userInput: String, collected: [String: String]) {
    guard let url = URL(string: "http://your-api/chat") else { return }

    var request = URLRequest(url: url)
    request.httpMethod = "POST"
    request.setValue("application/json", forHTTPHeaderField: "Content-Type")

    let body = ChatRequest(user_input: userInput, collected_info: collected)
    request.httpBody = try? JSONEncoder().encode(body)

    URLSession.shared.dataTask(with: request) { data, _, _ in
        if let data = data,
           let response = try? JSONDecoder().decode(ChatResponse.self, from: data) {
            print("ì‘ë‹µ ìƒíƒœ:", response.final_state)
        }
    }.resume()
}
```

---

## âœ… ì „ì²´ í†µí•© ìš”ì•½

| í•­ëª©      | ë‚´ìš©                                    |
| ------- | ------------------------------------- |
| ğŸ“¦ ë°±ì—”ë“œ  | LangGraph + Ollama + FastAPI ì„œë²„       |
| ğŸ”— API  | `/chat` POST ì—”ë“œí¬ì¸íŠ¸                    |
| ğŸ“± í”„ë¡ íŠ¸  | Android (Retrofit2), iOS (URLSession) |
| ğŸ” CORS | ëª¨ë°”ì¼ ì•±ì—ì„œ ì§ì ‘ í˜¸ì¶œ ê°€ëŠ¥í•˜ë„ë¡ í—ˆìš©                |
| ğŸ§  ê¸°ëŠ¥   | LLM ê¸°ë°˜ ì˜ë„ ì¸ì‹ + ë©€í‹°í„´ ìƒíƒœ íë¦„ ì²˜ë¦¬           |

---

## âœ… ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ

* [ ] `Dockerfile`ê³¼ `requirements.txt` ìƒì„±í•˜ì—¬ ë°°í¬ í™˜ê²½ êµ¬ì„±
* [ ] ìƒíƒœ ì €ì¥ (ì„¸ì…˜ ê¸°ë°˜) ë° ë‹¤ì¤‘ ì‚¬ìš©ì ì§€ì› ì¶”ê°€
* [ ] ìŒì„± ì…ì¶œë ¥ ì—°ë™ (STT, TTS) â†’ ëª¨ë°”ì¼ ìŒì„± UI êµ¬ì„±
* [ ] ReactFlow GUI ì—ë””í„°ì™€ ì„œë²„ í†µì‹  ì—°ê³„

---

í•„ìš”í•˜ì‹  ë¶€ë¶„ë¶€í„° í•˜ë‚˜ì”© êµ¬í˜„í•´ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë‹¤ìŒìœ¼ë¡œ ë„ì™€ë“œë¦´ í•­ëª©ì´ ë¬´ì—‡ì¸ì§€ ì•Œë ¤ì£¼ì‹œê² ì–´ìš”? (ì˜ˆ: Docker ë°°í¬, GUI ì—°ë™, ìŒì„± ì¶”ê°€ ë“±)

---

>>> RAG ì—°ë™ë¶€ë¶„ë„ êµ¬í˜„í•´ì¤˜

ë¬¼ë¡ ì…ë‹ˆë‹¤. ì•„ë˜ì— ìš”ì²­í•˜ì‹  **LangGraph + Ollama + FastAPI + RAG** ì—°ë™ êµ¬ì¡°ë¥¼ ì™„ì „í•œ í˜•íƒœë¡œ êµ¬í˜„í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

---

## âœ… ëª©í‘œ: `resolve_or_ask` ë…¸ë“œì—ì„œ RAG (Retrieval-Augmented Generation) ì—°ë™

* **ì‚¬ìš©ìì˜ ë¬¸ì œ ìƒí™©**ì„ ë°›ì•„
* **Vector DB**(ì˜ˆ: FAISS ë˜ëŠ” Chroma)ì—ì„œ ê´€ë ¨ ë¬¸ì„œë¥¼ ê²€ìƒ‰í•˜ê³ 
* **Ollama ê¸°ë°˜ LLM**ì— í•´ë‹¹ ë¬¸ì„œì™€ í•¨ê»˜ ë¬¸ì œë¥¼ ì „ë‹¬í•˜ì—¬ í•´ê²°ì±… ìƒì„±

---

## âœ… êµ¬ì¡° ìš”ì•½

```
ğŸ§‘ ì‚¬ìš©ì ì…ë ¥
   â†“
LangGraph ìƒíƒœ ì „ì´
   â†“
ğŸ“š `resolve_or_ask` ìƒíƒœ:
   - Vector DBë¡œ ìœ ì‚¬ ë¬¸ì„œ ê²€ìƒ‰ (RAG)
   - Ollamaë¡œ LLM ì§ˆë¬¸ (ë¬¸ë§¥ í¬í•¨)
   â†“
ğŸ¯ í•´ê²°ì±… ì‘ë‹µ or ë‹´ë‹¹ìì—ê²Œ Escalate
```

---

## âœ… ğŸ”§ êµ¬í˜„ êµ¬ì„±ìš”ì†Œ

### ğŸ“ í´ë” êµ¬ì¡° í™•ì¥

```
project-root/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ rag.py               # ğŸ” ë¬¸ì„œ ê²€ìƒ‰ ë° Ollama ì§ˆì˜
```

---

### ğŸ”¹ 1. RAG ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

```bash
pip install chromadb sentence-transformers
```

---

### ğŸ”¹ 2. rag.py (RAG ì²˜ë¦¬ ëª¨ë“ˆ)

```python
from sentence_transformers import SentenceTransformer
import chromadb
from chromadb.utils.embedding_functions import SentenceTransformerEmbeddingFunction
from app.ollama_utils import ask_llm

# ğŸ”¹ ì´ˆê¸°í™”
embedding_model = SentenceTransformer("all-MiniLM-L6-v2")
client = chromadb.Client()
collection = client.get_or_create_collection(
    name="faq_collection",
    embedding_function=SentenceTransformerEmbeddingFunction(model_name="all-MiniLM-L6-v2")
)

# ğŸ”¹ ë¬¸ì„œ ì¶”ê°€ í•¨ìˆ˜ (ì´ˆê¸°í™” ì‹œ í•œ ë²ˆë§Œ ì‹¤í–‰)
def add_documents(docs: list[dict]):
    for doc in docs:
        collection.add(
            documents=[doc["content"]],
            metadatas=[doc["meta"]],
            ids=[doc["id"]]
        )

# ğŸ”¹ ê²€ìƒ‰ + LLM í˜¸ì¶œ
def query_rag(user_query: str) -> str:
    results = collection.query(
        query_texts=[user_query],
        n_results=3
    )
    docs = results['documents'][0]
    context = "\n\n".join(docs)

    prompt = f"""ë‹¤ìŒì€ ì‚¬ìš©ìì˜ ì§ˆë¬¸ì…ë‹ˆë‹¤:
{user_query}

ì•„ë˜ëŠ” ì°¸ì¡° ë¬¸ì„œì…ë‹ˆë‹¤:
{context}

ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ëª…í™•í•˜ê³  ì‹¤ìš©ì ì¸ ë‹µë³€ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”."""
    return ask_llm(prompt)
```

---

### ğŸ”¹ 3. LangGraph ë…¸ë“œì—ì„œ RAG ì—°ë™ (`graph.py`)

```python
from app.rag import query_rag

def resolve_or_ask(state: ConversationState) -> ConversationState:
    response = query_rag(state['user_input'])
    state['rag_response'] = response
    state['rag_result'] = "solution_found" if "í•´ê²°" in response or "ë‹¤ìŒê³¼ ê°™ì´ í•˜ì„¸ìš”" in response else "no_solution"
    return state
```

---

### ğŸ”¹ 4. RAGìš© ì´ˆê¸° ë¬¸ì„œ ì¶”ê°€ (ì˜ˆì‹œ)

```python
if __name__ == "__main__":
    add_documents([
        {
            "id": "doc1",
            "content": "ì°¨ëŸ‰ ë“±ë¡ ì˜¤ë¥˜ ì½”ë“œ P001ì€ ì¸ì¦ ì‹¤íŒ¨ë¥¼ ì˜ë¯¸í•˜ë©°, ë‹¤ì‹œ ë¡œê·¸ì¸ í›„ ì¬ì‹œë„í•´ì•¼ í•©ë‹ˆë‹¤.",
            "meta": {"type": "faq", "tag": "vehicle"}
        },
        {
            "id": "doc2",
            "content": "ì—ì–´ì»¨ì´ ì‘ë™í•˜ì§€ ì•Šì„ ë•ŒëŠ” ì „ì› ì½”ë“œê°€ ê½‚í˜€ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ë¦¬ëª¨ì»¨ ë°°í„°ë¦¬ë¥¼ ì ê²€í•˜ì„¸ìš”.",
            "meta": {"type": "faq", "tag": "appliance"}
        }
    ])
```

ì´ ì½”ë“œëŠ” ì´ˆê¸° í•œë²ˆë§Œ ì‹¤í–‰ë˜ë©°, Chroma DBì— ë¬¸ì„œë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

---

## âœ… API ì—°ë™ ê²°ê³¼ ì˜ˆì‹œ

```json
POST /chat
{
  "user_input": "ì°¨ëŸ‰ ë“±ë¡ ì˜¤ë¥˜ P001ì´ ë°œìƒí–ˆì–´ìš”",
  "collected_info": {}
}
```

â†’ ìµœì¢… ì‘ë‹µ:

```json
{
  "final_state": {
    "intent": "report_issue",
    "info_status": "sufficient_info",
    "rag_response": "ì°¨ëŸ‰ ë“±ë¡ ì˜¤ë¥˜ ì½”ë“œ P001ì€ ì¸ì¦ ì‹¤íŒ¨ë¥¼ ì˜ë¯¸í•˜ë©°, ë‹¤ì‹œ ë¡œê·¸ì¸ í›„ ì¬ì‹œë„í•´ì•¼ í•©ë‹ˆë‹¤.",
    "rag_result": "solution_found"
  }
}
```

---

## âœ… ìš”ì•½

| í•­ëª©        | ì„¤ëª…                            |
| --------- | ----------------------------- |
| ğŸ§  RAG ë°©ì‹ | ì‚¬ìš©ì ì§ˆë¬¸ â†’ ë²¡í„° ê²€ìƒ‰ â†’ LLM ìš”ì•½       |
| ğŸ—ƒï¸ ë²¡í„°DB  | Chroma + MiniLM ì‚¬ìš©            |
| ğŸ’¬ LLM    | Ollama Llama3 ëª¨ë¸ ê¸°ë°˜           |
| ğŸ¯ ìƒíƒœ ì „ì´  | í•´ê²°ì±…ì´ ìˆì„ ê²½ìš° â†’ ì™„ë£Œ, ì—†ìœ¼ë©´ escalate |

---

## âœ… ë‹¤ìŒ ì œì•ˆ

* [ ] FastAPIì— `/rag/test` ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€í•´ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ê¸°
* [ ] ë¬¸ì„œ ê´€ë¦¬ìš© admin UI êµ¬ì„± (ì¶”í›„ í™•ì¥)
* [ ] Vector DBë¥¼ SQLite ë˜ëŠ” Postgres ê¸°ë°˜ìœ¼ë¡œ ì €ì¥ ì„¤ì •

---

í•„ìš”í•˜ì‹œë©´ **ì „ì²´ ì½”ë“œ íŒ¨í‚¤ì§€ë¥¼ GitHub ì €ì¥ì†Œ ìŠ¤íƒ€ì¼ë¡œ ì •ë¦¬**í•´ë“œë¦´ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
ë˜ëŠ” ëª¨ë°”ì¼ ì•±ê³¼ í†µì‹ í•  ë•Œ **RAG ì‘ë‹µë§Œ ë³„ë„ë¡œ í‘œì‹œ**í•˜ëŠ” êµ¬ì¡°ë„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìŒìœ¼ë¡œ ì–´ë–¤ ë¶€ë¶„ì„ êµ¬í˜„í•˜ê±°ë‚˜ í™•ì¥í•´ë“œë¦´ê¹Œìš”?

---

>>> "ë‹´ë‹¹ìì—ê²Œ Escalate" ì´í›„ì˜ ë‚´ìš©ë„ ì„¤ê³„í•´ì¤˜

ë„¤, ì‚¬ìš©ìì˜ ë¬¸ì œ í•´ê²°ì´ RAGë¡œ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°, **ë‹´ë‹¹ìì—ê²Œ Escalateí•œ ì´í›„ì˜ ì „ì²´ íë¦„**ì„ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ê³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## âœ… "ë‹´ë‹¹ìì—ê²Œ Escalate" ì´í›„ ì „ì²´ íë¦„ ì„¤ê³„

### ğŸ§­ ì „ì²´ í”„ë¡œì„¸ìŠ¤ ìš”ì•½

```plaintext
ì‚¬ìš©ì â†’ LangGraph íë¦„
     â†’ RAG ì‹¤íŒ¨
         â†’ ë‹´ë‹¹ìì—ê²Œ Escalate (ì´ìŠˆ ë“±ë¡)
             â†’ ë‹´ë‹¹ì ì‘ë‹µ ëŒ€ê¸° (ìŠ¬ë™, ì´ë©”ì¼, UI ë“±)
                 â†’ ì‘ë‹µ ìˆ˜ì‹  ì‹œ Knowledge Baseì— ì €ì¥
                     â†’ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬ ë° ì„¸ì…˜ ì¢…ë£Œ
```

---

## âœ… LangGraph ìƒíƒœ íë¦„ (ìš”ì•½ êµ¬ì¡°)

| ìƒíƒœ                      | ì„¤ëª…                                 |
| ----------------------- | ---------------------------------- |
| `escalate_to_human`     | ë‹´ë‹¹ìì—ê²Œ ì´ìŠˆ ì „ë‹¬ (DB/Slack/Email ë“±ìœ¼ë¡œ)   |
| `wait_for_response`     | ë‹´ë‹¹ìì˜ ë‹µë³€ì„ ê¸°ë‹¤ë¦¬ëŠ” ìƒíƒœ (6h íƒ€ì„ì•„ì›ƒ ë“±)       |
| `update_knowledge_base` | ë‹´ë‹¹ìì˜ ì‘ë‹µì„ KB, ë²¡í„°DBì— ì €ì¥ (í–¥í›„ ìë™ì‘ë‹µ í™œìš©) |
| `notify_user`           | ì‚¬ìš©ìì—ê²Œ ë‹´ë‹¹ìì˜ ì‘ë‹µ ì „ë‹¬                   |
| `end_success`           | ëŒ€í™” ì¢…ë£Œ                              |

---

## âœ… ê° ìƒíƒœë³„ ìƒì„¸ ì„¤ê³„

### ğŸ”¹ 1. `escalate_to_human`

* ì‚¬ìš©ì ì§ˆë¬¸, ìˆ˜ì§‘ëœ ì •ë³´, RAG ì‹¤íŒ¨ ë‚´ìš© ë“±ì„ í¬í•¨í•˜ì—¬ ì´ìŠˆ ì €ì¥
* ì „ì†¡ ë°©ë²•:

  * âœ… ë‚´ë¶€ DB ì €ì¥ (ì˜ˆ: `escalation_queue` í…Œì´ë¸”)
  * âœ… Slack ì•Œë¦¼ ë˜ëŠ” ë‹´ë‹¹ì ì´ë©”ì¼ ì „ì†¡

**ì˜ˆì‹œ ì½”ë“œ:**

```python
def escalate_to_human_operator(state: ConversationState) -> ConversationState:
    # DB ì €ì¥ ë˜ëŠ” Slack ì—°ë™
    report = {
        "user_input": state["user_input"],
        "collected_info": state.get("collected_info", {}),
        "llm_response": state.get("rag_response", ""),
    }
    save_to_escalation_db(report)
    return state
```

---

### ğŸ”¹ 2. `wait_for_response`

* ìƒíƒœ ìœ ì§€ (LangGraph `wait` ìƒíƒœ ì‚¬ìš©)
* íƒ€ì„ì•„ì›ƒ ì„¤ì • (ì˜ˆ: 6ì‹œê°„)
* ì£¼ê¸°ì ìœ¼ë¡œ DB ë˜ëŠ” íë¥¼ í™•ì¸í•´ **ë‹´ë‹¹ì ì‘ë‹µ ì—¬ë¶€ í™•ì¸**

```python
# LangGraph ì„¤ì •
{
  "type": "wait",
  "timeout": "6h",
  "next": "update_knowledge_base"
}
```

---

### ğŸ”¹ 3. `update_knowledge_base`

* ë‹´ë‹¹ìì˜ ì‘ë‹µì„ ë°›ì•„ì„œ:

  * âœ… ë²¡í„°DB(RAG ìš©) ë°
  * âœ… ì¼ë°˜ DB(FAQ, ì‚¬ìš©ì ë¡œê·¸) ì— ì €ì¥

```python
def save_human_answer_to_kb(state: ConversationState) -> ConversationState:
    answer = fetch_human_response(state["user_input"])
    store_in_vector_db(question=state["user_input"], answer=answer)
    state["final_answer"] = answer
    return state
```

---

### ğŸ”¹ 4. `notify_user`

* ì‚¬ìš©ìì—ê²Œ ë‹´ë‹¹ìì˜ ì‘ë‹µì„ ì „ë‹¬
* FastAPIë¥¼ í†µí•´ ëŒ€í™”ì°½ì— í‘œì‹œí•˜ê±°ë‚˜, í‘¸ì‹œ ì•Œë¦¼ìœ¼ë¡œ ì „ì†¡

```python
def notify_user(state: ConversationState) -> ConversationState:
    # ì‹¤ì œ ë©”ì‹œì§€ ì „ì†¡ì€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ pullí•˜ê±°ë‚˜ push ìˆ˜ë‹¨ ì‚¬ìš©
    print("ğŸ“¢ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬:", state.get("final_answer"))
    return state
```

---

## âœ… LangGraph ìƒíƒœ ì •ì˜ ìš”ì•½ (ì¶”ê°€ í¬í•¨)

```yaml
escalate_to_human:
  type: task
  function: escalate_to_human_operator
  next: wait_for_response

wait_for_response:
  type: wait
  timeout: 6h
  next: update_knowledge_base

update_knowledge_base:
  type: task
  function: save_human_answer_to_kb
  next: notify_user

notify_user:
  type: task
  function: notify_user
  next: end_success
```

---

## âœ… Escalateì— í•„ìš”í•œ êµ¬ì„± ìš”ì†Œ

| í•­ëª©        | êµ¬í˜„ ë°©ë²•                               |
| --------- | ----------------------------------- |
| ğŸ“¦ ì´ìŠˆ ì €ì¥  | SQLite/Postgresì— `escalations` í…Œì´ë¸”  |
| ğŸ”” ì•Œë¦¼     | Slack Webhook / ì´ë©”ì¼ / Admin UI      |
| â³ ì‘ë‹µ ëŒ€ê¸°   | LangGraph `wait` ìƒíƒœ or FastAPI + ì›Œì»¤ |
| ğŸ“š KB ì €ì¥  | Chroma / FAISS ë²¡í„° DB ì‚½ì…             |
| ğŸ“² ì‚¬ìš©ì í†µì§€ | ì•± polling ë˜ëŠ” push notification      |

---

## âœ… í›„ì† í™•ì¥ ì•„ì´ë””ì–´

* ğŸ“Š **Dashboard UI**: ë‹´ë‹¹ìë“¤ì´ ì‘ë‹µí•  ìˆ˜ ìˆëŠ” ì›¹ ì¸í„°í˜ì´ìŠ¤ ì œê³µ
* ğŸ“ˆ **ì‚¬ìš©ì ë§Œì¡±ë„ í‰ê°€**: ë‹´ë‹¹ì ì‘ë‹µ í›„ thumbs-up/down ë°›ê¸°
* ğŸ”„ **ìë™ ë¼ë²¨ë§**: ì´ìŠˆ ìœ í˜• íƒœê¹…í•˜ì—¬ í–¥í›„ ìë™í™” ê°œì„ 

---

í•„ìš”í•˜ì‹œë‹¤ë©´ ë‹¤ìŒì„ ì¶”ê°€ êµ¬í˜„í•´ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

* `escalation_queue` í…Œì´ë¸” êµ¬ì¡° ë° FastAPI ê´€ë¦¬ API
* Slack Webhook ì—°ë™ ì½”ë“œ
* ë²¡í„° DB ì €ì¥ í•¨ìˆ˜ ì „ì²´ êµ¬í˜„

ì–´ë–¤ í•­ëª©ë¶€í„° ë‹¤ìŒìœ¼ë¡œ ë„ì™€ë“œë¦´ê¹Œìš”?

---

>>> ì´ê²ƒë“¤ ìì„¸íˆ ì„¤ê³„í•´ë´
>>> ğŸ“Š Dashboard UI: ë‹´ë‹¹ìë“¤ì´ ì‘ë‹µí•  ìˆ˜ ìˆëŠ” ì›¹ ì¸í„°í˜ì´ìŠ¤ ì œê³µ
>>> ğŸ“ˆ ì‚¬ìš©ì ë§Œì¡±ë„ í‰ê°€: ë‹´ë‹¹ì ì‘ë‹µ í›„ thumbs-up/down ë°›ê¸°
>>> ğŸ”„ ìë™ ë¼ë²¨ë§: ì´ìŠˆ ìœ í˜• íƒœê¹…í•˜ì—¬ í–¥í›„ ìë™í™” ê°œì„ 

ì•„ì£¼ ì¢‹ì€ ë°©í–¥ì…ë‹ˆë‹¤. ìš”ì²­í•˜ì‹  ì„¸ ê°€ì§€ í•­ëª©ì„ LangGraph + RAG + ë‹´ë‹¹ì ì‹œìŠ¤í…œì— í†µí•©í•˜ëŠ” **êµ¬ì¡°ì  ì„¤ê³„**ì™€ í•¨ê»˜ **ê¸°ëŠ¥ íë¦„**, **ë°ì´í„° ëª¨ë¸**, **UI ì˜ˆì‹œ**, **ë°±ì—”ë“œ ì—°ê³„**ê¹Œì§€ ìì„¸íˆ ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

---

## âœ… 1. ğŸ“Š **Dashboard UI: ë‹´ë‹¹ì ì‘ë‹µ ì›¹ ì¸í„°í˜ì´ìŠ¤**

### ğŸ¯ ëª©ì 

* RAGë¡œ í•´ê²°ë˜ì§€ ì•Šì€ ì‚¬ìš©ì ì´ìŠˆë¥¼ ë‹´ë‹¹ìê°€ ì§ì ‘ ë³´ê³  ë‹µë³€
* UIë¥¼ í†µí•´ ë‹µë³€ ì‘ì„± â†’ ë²¡í„°DB(RAGìš©), DBì— ìë™ ì €ì¥

---

### ğŸ§© ì‹œìŠ¤í…œ êµ¬ì„±

| êµ¬ì„± ìš”ì†Œ      | ì„¤ëª…                                                 |
| ---------- | -------------------------------------------------- |
| ğŸ“„ í…Œì´ë¸”     | `escalation_queue` (ë¯¸ì‘ë‹µ ì´ìŠˆ ëª©ë¡ ì €ì¥)                  |
| ğŸŒ í”„ë¡ íŠ¸ì—”ë“œ   | React / Next.js / Vue ë“±ìœ¼ë¡œ êµ¬í˜„ëœ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ             |
| âš™ï¸ ë°±ì—”ë“œ API | `/admin/escalations` ëª©ë¡ ì¡°íšŒ, `/admin/resolve` ì‘ë‹µ ì œì¶œ |

---

### ğŸ§± DB í…Œì´ë¸” êµ¬ì¡° ì˜ˆì‹œ (`PostgreSQL` ë˜ëŠ” `SQLite`)

```sql
CREATE TABLE escalation_queue (
    id UUID PRIMARY KEY,
    user_input TEXT,
    collected_info JSONB,
    rag_response TEXT,
    status TEXT DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT NOW(),
    resolved_at TIMESTAMP,
    resolved_by TEXT,
    resolved_answer TEXT,
    label TEXT
);
```

---

### ğŸ–¼ï¸ UI ì™€ì´ì–´í”„ë ˆì„ ì˜ˆì‹œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸš¨ ë¯¸í•´ê²° ì´ìŠˆ ëª©ë¡ (pending)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - ì°¨ëŸ‰ ë“±ë¡ ì˜¤ë¥˜ ë°œìƒ: P001   â”‚
â”‚ - ì„¸íƒê¸° ì—°ê²° ì•ˆë¨           â”‚
â”‚ - ì—ì–´ì»¨ êº¼ì§ í›„ ì „ì› ë¬´ë°˜ì‘  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

í´ë¦­ ì‹œ ìƒì„¸ ë³´ê¸°:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§¾ ì‚¬ìš©ì ì§ˆë¬¸: ì—ì–´ì»¨ì´ êº¼ì§€ê³  ì•ˆ ì¼œì ¸ìš”
ğŸ“„ ìˆ˜ì§‘ ì •ë³´: {"ëª¨ë¸": "AC1234"}
ğŸ’¬ LLM ì‘ë‹µ: í•´ê²°í•  ìˆ˜ ì—†ìŒ

ğŸ–Šï¸ ë‹´ë‹¹ì ì‘ë‹µ ì‘ì„±ë€
[ ì—¬ê¸°ì— í•´ê²° ë°©ì•ˆì„ ì‘ì„±í•˜ì„¸ìš” ]

[ğŸ“¥ ë‹µë³€ ì œì¶œ] [ğŸ·ï¸ ì´ìŠˆ íƒœê·¸]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

### ğŸ”„ í”„ë¡ íŠ¸ì™€ API ì—°ë™ ì˜ˆì‹œ

```ts
// GET /admin/escalations?status=pending
// POST /admin/resolve
{
  id: "uuid",
  resolved_answer: "ì „ì› ë¦¬ì…‹ ë°©ë²•ì€...",
  resolved_by: "í™ê¸¸ë™",
  label: "ê°€ì „ì œí’ˆ > ì „ì›ë¬¸ì œ"
}
```

---

## âœ… 2. ğŸ“ˆ **ì‚¬ìš©ì ë§Œì¡±ë„ í‰ê°€ (Feedback)**

### ğŸ¯ ëª©ì 

* ë‹´ë‹¹ì ì‘ë‹µ í›„ ì‚¬ìš©ìê°€ **í•´ê²°ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€ ë˜ëŠ” ë§Œì¡±ë„**ë¥¼ í‰ê°€
* í–¥í›„ í’ˆì§ˆ ê°œì„  ë° ìë™ ì‘ë‹µ ê°œì„ ì˜ ê¸°ì¤€ ë°ì´í„° í™•ë³´

---

### ğŸ§± DB í…Œì´ë¸” ì˜ˆì‹œ (`feedback`)

```sql
CREATE TABLE feedback (
    id UUID PRIMARY KEY,
    escalation_id UUID REFERENCES escalation_queue(id),
    rating TEXT CHECK (rating IN ('ğŸ‘', 'ğŸ‘')),
    comment TEXT,
    submitted_at TIMESTAMP DEFAULT NOW()
);
```

---

### ğŸ“² ì•±/ì›¹ì—ì„œ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì˜ˆì‹œ

```
â“ ë„ì›€ì´ ë˜ì—ˆë‚˜ìš”?

[ ğŸ‘ ]   [ ğŸ‘ ]

ğŸ’¬ ì˜ê²¬ì´ ìˆìœ¼ì‹œë©´ ì‘ì„±í•´ ì£¼ì„¸ìš”:
[ ____________________________ ]

[ğŸ“© ì œì¶œ]
```

---

### âœ… í‰ê°€ íë¦„

1. ë‹´ë‹¹ì ì‘ë‹µ ì™„ë£Œ ì‹œ â†’ ì‚¬ìš©ìì—ê²Œ ë‹µë³€ í‘œì‹œ
2. ì‚¬ìš©ìëŠ” thumbs up/down ë° ì½”ë©˜íŠ¸ ì…ë ¥ ê°€ëŠ¥
3. ë°±ì—”ë“œ API ì €ì¥ â†’ `/feedback`

---

## âœ… 3. ğŸ”„ **ìë™ ë¼ë²¨ë§: ì´ìŠˆ ìœ í˜• íƒœê¹…**

### ğŸ¯ ëª©ì 

* ë‹´ë‹¹ì ì‘ë‹µ ì‹œ ì´ìŠˆë¥¼ ìˆ˜ë™ ë˜ëŠ” ìë™ìœ¼ë¡œ **ë¼ë²¨ë§**
* í–¥í›„ ìƒˆë¡œìš´ ì´ìŠˆì— ëŒ€í•´ **ìë™ íƒœê¹… / ìë™ ì‘ë‹µ ê¸°ë°˜ ê°•í™”í•™ìŠµì— í™œìš©**

---

### ğŸ“¦ ìë™ ë¼ë²¨ë§ ì²˜ë¦¬ ë°©ì‹

| ë°©ì‹     | ì„¤ëª…                         |
| ------ | -------------------------- |
| ğŸŸ¡ ìˆ˜ë™  | ë‹´ë‹¹ìê°€ ì‘ë‹µ ì‹œ `ì¹´í…Œê³ ë¦¬`ë¥¼ ì„ íƒ       |
| ğŸŸ¢ ë°˜ìë™ | LLMì´ ì˜ˆì¸¡í•œ ë¼ë²¨ì„ ì¶”ì²œí•˜ê³ , ë‹´ë‹¹ìê°€ í™•ì¸ |
| ğŸ”µ ìë™  | ì¼ì • confidence ì´ìƒì´ë©´ ìë™ ì €ì¥   |

---

### ğŸ¤– ìë™ íƒœê¹…ìš© LLM Prompt ì˜ˆì‹œ (Ollama)

```text
ë‹¤ìŒ ê³ ê° ì§ˆë¬¸ê³¼ í•´ê²° ë‚´ìš©ì„ ë³´ê³  ì ì ˆí•œ ì¹´í…Œê³ ë¦¬ë¥¼ íƒœê¹…í•´ì¤˜.

ì§ˆë¬¸: ì„¸íƒê¸°ê°€ êº¼ì§€ê³  ì•ˆ ì¼œì ¸ìš”
í•´ê²° ë‚´ìš©: ì „ì› ì½”ë“œë¥¼ ë½‘ê³  10ì´ˆ í›„ ë‹¤ì‹œ ì—°ê²°í•˜ì„¸ìš”

ì¹´í…Œê³ ë¦¬ í›„ë³´: ["ê°€ì „ > ì „ì›ë¬¸ì œ", "ê°€ì „ > ì—°ê²°ë¬¸ì œ", "ì†Œí”„íŠ¸ì›¨ì–´ > ì˜¤ë¥˜", "ê¸°íƒ€"]
ì‘ë‹µ: ê°€ì „ > ì „ì›ë¬¸ì œ
```

```python
def auto_label_issue(question: str, answer: str) -> str:
    prompt = f"""ë‹¤ìŒ ì§ˆë¬¸ê³¼ ë‹µë³€ì„ ë³´ê³  ì´ìŠˆ ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ì²œí•´ì¤˜:\n\nì§ˆë¬¸: {question}\në‹µë³€: {answer}\n\nì¹´í…Œê³ ë¦¬ í›„ë³´: ["ê°€ì „ > ì „ì›ë¬¸ì œ", "ê°€ì „ > ì—°ê²°ë¬¸ì œ", "ê¸°íƒ€"]"""
    return ask_llm(prompt).strip()
```

---

## âœ… ì´ ì„¸ ê¸°ëŠ¥ì˜ ì—°ê³„ íë¦„ (ì „ì²´)

```plaintext
ì‚¬ìš©ì â†’ LangGraph â†’ RAG ì‹¤íŒ¨ â†’ ë‹´ë‹¹ìì—ê²Œ Escalate
    â†“
[ğŸ“Š Dashboard UI]ì—ì„œ í™•ì¸ ë° ì‘ë‹µ
    â†“
[ğŸ”„ ìë™ ë¼ë²¨ë§] í›„ DB + ë²¡í„°DB ì €ì¥
    â†“
ì‚¬ìš©ìì—ê²Œ ì‘ë‹µ ì „ë‹¬
    â†“
[ğŸ“ˆ ë§Œì¡±ë„ í‰ê°€] thumbs up/down ì €ì¥
    â†“
ë‹¤ìŒ ìœ ì‚¬ ì§ˆë¬¸ ë°œìƒ ì‹œ â†’ ìë™ ì‘ë‹µ ë˜ëŠ” RAG ì •ë°€ë„ í–¥ìƒ
```

---

## âœ… ë§ˆë¬´ë¦¬ ìš”ì•½

| ê¸°ëŠ¥              | êµ¬í˜„ ìš”ì              | í™œìš© ëª©ì                 |
| --------------- | ----------------- | -------------------- |
| ğŸ“Š Dashboard UI | ë‹´ë‹¹ì ì‘ë‹µ ì²˜ë¦¬, KB ì €ì¥  | ë¬¸ì œ í•´ê²° ì±…ì„ ë¶„ì‚° ë° ìë™í™” í•™ìŠµ |
| ğŸ“ˆ ë§Œì¡±ë„ í‰ê°€       | thumbs up/down ì €ì¥ | ì‘ë‹µ í’ˆì§ˆ ê°œì„  ë° í‰ê°€ ì§€í‘œ ìˆ˜ì§‘  |
| ğŸ”„ ìë™ ë¼ë²¨ë§       | LLM ê¸°ë°˜ or ìˆ˜ë™      | í–¥í›„ ìë™ ì‘ë‹µ íë¦„ ì„¤ê³„ì— í™œìš©   |

---

## âœ… ë‹¤ìŒ ì‘ì—… ì œì•ˆ

* [ ] FastAPI ê¸°ë°˜ `/admin/escalations`, `/admin/resolve` API êµ¬í˜„
* [ ] ê°„ë‹¨í•œ React/Vue ê¸°ë°˜ Dashboard UI í…œí”Œë¦¿ ì œê³µ
* [ ] ìë™ ë¼ë²¨ë§ìš© LLM ì½”ë“œ ë¶„ë¦¬ + Confidence ê¸°ë°˜ ì²˜ë¦¬

í•„ìš”í•˜ì‹  ë¶€ë¶„ë¶€í„° ì´ì–´ì„œ êµ¬í˜„í•´ë“œë¦´ê¹Œìš”? (ì˜ˆ: FastAPI ê´€ë¦¬ì APIë¶€í„°?)

---

>>> llm ì€ ê¸°ë³¸ì ìœ¼ë¡œ on-premise ë¡œ í• êº¼ì•¼. ê°€ëŠ¥í•˜ë‹¤ë©´ on-device ìª½ìœ¼ë¡œ í•˜ê³ 

ì•Œê² ìŠµë‹ˆë‹¤. ì‚¬ìš©ìì˜ í™˜ê²½ì— ë§ì¶° **LLM ìš´ì˜ ë°©ì‹**ì„ ë‹¤ìŒê³¼ ê°™ì´ ì •ë¦¬í•´ë‘ê² ìŠµë‹ˆë‹¤.

---

## âœ… LLM ìš´ì˜ ì „ëµ

| í•­ëª©       | ë‚´ìš©                                                                 |
| -------- | ------------------------------------------------------------------ |
| ğŸ¯ ê¸°ë³¸ ìš´ì˜ | **ì˜¨í”„ë ˆë¯¸ìŠ¤(On-Premise)** ì„œë²„ì— LLM (ì˜ˆ: Ollama + LLaMA3, Mistral ë“±)      |
| ğŸ“± ì¶”ê°€ ì˜µì…˜ | ê°€ëŠ¥í•˜ë‹¤ë©´ **ì˜¨ë””ë°”ì´ìŠ¤(On-Device)** (ì˜ˆ: MobileLLM, TinyLlama, CoreML ë“±)ë¡œ í™•ì¥ |
| ğŸ” ì´ìœ     | ë°ì´í„° ë³´ì•ˆ, ì§€ì—° ìµœì†Œí™”, ì™¸ë¶€ API ì˜ì¡´ë„ ì œê±°                                      |
| ğŸ§© êµ¬ì„± ì˜ˆ  | ì„œë²„: GPU íƒ‘ì¬ Ubuntu + Ollama, ë””ë°”ì´ìŠ¤: iOS/Android ì „ìš© ê²½ëŸ‰ ëª¨ë¸             |

---

ì´ì œ ì˜¨í”„ë ˆë¯¸ìŠ¤/ì˜¨ë””ë°”ì´ìŠ¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‹¤ìŒ í•­ëª©ë“¤ì„ ê³„ì† êµ¬í˜„í•´ë‚˜ê°€ë©´ ë˜ê² ìŠµë‹ˆë‹¤:

* [ ] ì˜¨í”„ë ˆë¯¸ìŠ¤ìš© Ollama ëª¨ë¸ ìµœì í™” (ì˜ˆ: 4bit ì–‘ìí™”, GPU ì„¤ì •)
* [ ] ì˜¨ë””ë°”ì´ìŠ¤ìš© ëª¨ë¸ ì„œë¹™/ì¶”ë¡  (ì˜ˆ: CoreML, ONNX, MLC-LLM ë“±)
* [ ] ì„œë²„ì™€ ëª¨ë°”ì¼ ê°„ LLM ê²°ê³¼ ì—°ë™ ì‹œ fallback ì „ëµ

í•„ìš”í•˜ì‹œë©´, ê° í™˜ê²½ì— ë§ëŠ” LLM ë°°í¬ êµ¬ì¡°ë‚˜ ì„ íƒ ëª¨ë¸ë„ ì¶”ì²œí•´ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë‹¤ìŒìœ¼ë¡œ ë„ì™€ë“œë¦´ í•­ëª©ì„ ì•Œë ¤ì£¼ì„¸ìš”.

---

>>> ëª¨ë°”ì¼ë‹¨ì—ì„œëŠ” ë¬¸ìë¿ ì•„ë‹ˆë¼ ìŒì„± ì…ì¶œë ¥ ê¸°ëŠ¥ì´ í•„ìˆ˜ì•¼.
>>> ì, ì¼ë‹¨ ì§€ê¸ˆê¹Œì§€ì˜ ë‚´ìš©ì„ ì „ì²´ì ì¸ ì‹œìŠ¤í…œ êµ¬ì¡° ê·¸ë¦¼ì„ ì •ë¦¬í•´ì¤˜. ê·¸ë¦¬ê³  ì „ì²´ ì½”ë“œ íŒ¨í‚¤ì§€ë¥¼ GitHub ì €ì¥ì†Œ ìŠ¤íƒ€ì¼ë¡œ ì •ë¦¬í•´ì¤˜.

ì•„ë˜ëŠ” ì§€ê¸ˆê¹Œì§€ ì‚¬ìš©ìê°€ ì„¤ê³„í•˜ì‹  ì „ì²´ ì‹œìŠ¤í…œì˜ **êµ¬ì¡°ë„**ì™€ í•¨ê»˜,
ê·¸ì— ëŒ€ì‘ë˜ëŠ” **GitHub ìŠ¤íƒ€ì¼ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡° ë° ì½”ë“œ êµ¬ì„± ì„¤ê³„**ì…ë‹ˆë‹¤.

---

# âœ… ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°ë„

```plaintext
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚      ğŸ“± Mobile App     â”‚
                   â”‚ (Android / iOS ì•±)     â”‚
                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â”‚ - ì‚¬ìš©ì ì…ë ¥ (ë¬¸ì/ìŒì„±) â”‚
                   â”‚ - ìŒì„± ì¸ì‹(STT), í•©ì„±(TTS) â”‚
                   â”‚ - ì±„íŒ… UI + ë§Œì¡±ë„ í‰ê°€    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ API ìš”ì²­ (REST)
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚       ğŸŒ FastAPI ì„œë²„ (ì˜¨í”„ë ˆë¯¸ìŠ¤ LLM)        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ /chat â†’ LangGraph íë¦„ ì‹¤í–‰                 â”‚
        â”‚ /feedback â†’ ë§Œì¡±ë„ ì €ì¥                    â”‚
        â”‚ /admin/* â†’ ëŒ€ì‹œë³´ë“œ API (ë‹´ë‹¹ì ì‘ë‹µ ë“±)     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ§  LangGraph (ë©€í‹°í„´ íë¦„ ê´€ë¦¬) â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚              â”‚
            â–¼              â–¼
   [ğŸ§  Ollama LLM]     [ğŸ” RAG (Chroma DB)]
     (ì˜ë„ ë¶„ì„, ì§ˆë¬¸)    (FAQ ë¬¸ì„œ ê²€ìƒ‰ + ë¬¸ë§¥ ìƒì„±)
            â”‚
            â–¼
   âŒ í•´ê²° ë¶ˆê°€ ì‹œ Escalate
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ‘©â€ğŸ’¼ ë‹´ë‹¹ì ì‘ë‹µ ëŒ€ì‹œë³´ë“œ (ì›¹)          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ - ì´ìŠˆ í™•ì¸ ë° í•´ê²°ì±… ì‘ì„±            â”‚
   â”‚ - ìë™ ë¼ë²¨ë§ + RAG KB ì €ì¥           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# ğŸ“¦ GitHub í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ê³„

```
ai-agent-system/
â”œâ”€â”€ app/                            # ğŸ¯ FastAPI ì•±
â”‚   â”œâ”€â”€ main.py                     # FastAPI ì§„ì…ì 
â”‚   â”œâ”€â”€ graph.py                    # LangGraph ì •ì˜ ë° ì‹¤í–‰
â”‚   â”œâ”€â”€ models.py                   # Pydantic ëª¨ë¸ ì •ì˜
â”‚   â”œâ”€â”€ ollama_utils.py             # Ollama LLM ì—°ë™ í•¨ìˆ˜
â”‚   â”œâ”€â”€ rag.py                      # RAG ê²€ìƒ‰ + LLM ì§ˆì˜ ì²˜ë¦¬
â”‚   â”œâ”€â”€ admin.py                    # ë‹´ë‹¹ì API (ëŒ€ì‹œë³´ë“œìš©)
â”‚   â””â”€â”€ feedback.py                 # ì‚¬ìš©ì ë§Œì¡±ë„ í‰ê°€ API
â”‚
â”œâ”€â”€ dashboard-ui/                   # ğŸ‘©â€ğŸ’¼ ë‹´ë‹¹ì ì›¹ UI (React/Vue ë“±)
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ api.ts                  # FastAPI API í˜¸ì¶œ
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ mobile-app/                     # ğŸ“± iOS & Android (Flutter/React Native)
â”‚   â”œâ”€â”€ android/ios/
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ chat_ui.dart
â”‚   â”‚   â”œâ”€â”€ stt_tts_service.dart    # ìŒì„± ì…ì¶œë ¥ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ api_service.dart        # ì„œë²„ API í†µì‹ 
â”‚   â”‚   â””â”€â”€ feedback_screen.dart
â”‚   â””â”€â”€ pubspec.yaml
â”‚
â”œâ”€â”€ vector-db/                      # ğŸ” ChromaDB ë¬¸ì„œ ì´ˆê¸°í™”/ê´€ë¦¬
â”‚   â”œâ”€â”€ initialize.py
â”‚   â””â”€â”€ documents/faq_kr.json
â”‚
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ simulate_local_query.py     # ë¡œì»¬ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
â”‚
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ README.md
â””â”€â”€ .env.example
```

---

# ğŸ§  ì£¼ìš” êµ¬ì„± ê¸°ëŠ¥ ìš”ì•½

| ëª¨ë“ˆ                | ê¸°ëŠ¥                                     |
| ----------------- | -------------------------------------- |
| `graph.py`        | LangGraph ì •ì˜: ìƒíƒœ ê¸°ë°˜ ë©€í‹°í„´ íë¦„             |
| `ollama_utils.py` | Ollama ë¡œì»¬ LLM ì—°ë™                       |
| `rag.py`          | Chroma DB + ë¬¸ì„œ ì„ë² ë”© + RAG ì§ˆì˜            |
| `admin.py`        | `/admin/escalations`, `/admin/resolve` |
| `feedback.py`     | `/feedback` API ë° DB ì €ì¥                |
| `dashboard-ui/`   | ë‹´ë‹¹ì ì›¹ UI (ë¬¸ì œ í™•ì¸ + ì‘ë‹µ + ìë™ ë¼ë²¨ë§)         |
| `mobile-app/`     | ìŒì„± ì…ì¶œë ¥ í¬í•¨ ì±„íŒ… ì•± (Android/iOS)           |

---

# ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ ì •ë¦¬

| êµ¬ì„±         | ì‚¬ìš© ê¸°ìˆ                                                                   |
| ---------- | ---------------------------------------------------------------------- |
| **ë°±ì—”ë“œ**    | FastAPI + LangGraph + Ollama                                           |
| **RAG**    | ChromaDB + SentenceTransformer                                         |
| **LLM**    | LLaMA3 or Mistral via Ollama (ì˜¨í”„ë ˆë¯¸ìŠ¤)                                   |
| **DB**     | SQLite/PostgreSQL                                                      |
| **ì›¹ ëŒ€ì‹œë³´ë“œ** | React ë˜ëŠ” Vue.js                                                        |
| **ëª¨ë°”ì¼ ì•±**  | Flutter / React Native + STT/TTS                                       |
| **ìŒì„± ì²˜ë¦¬**  | Android: Google Speech API, iOS: AVSpeechSynthesizer, Speech Framework |

---

## âœ… ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ

1. **GitHub ì €ì¥ì†Œ ì´ˆê¸°í™”ìš© ZIP íŒ¨í‚¤ì§€** ì œê³µ (ì›í•˜ì‹¤ ê²½ìš°)
2. **FastAPI ì„œë²„ Dockerfile & run ìŠ¤í¬ë¦½íŠ¸**
3. **Flutter ê¸°ë°˜ ìŒì„±ì…ì¶œë ¥ ì±„íŒ… ì•± ì½”ë“œ ìƒ˜í”Œ**
4. **RAG ë¬¸ì„œ ì´ˆê¸°í™” ìƒ˜í”Œ ìŠ¤í¬ë¦½íŠ¸**

---

ì–´ë–¤ í•­ëª©ë¶€í„° ìƒì„±í•´ë“œë¦´ê¹Œìš”?

* ğŸ“ ì „ì²´ ì½”ë“œ íŒ¨í‚¤ì§€ë¥¼ ì••ì¶• íŒŒì¼ë¡œ ë“œë¦´ê¹Œìš”?
* ë˜ëŠ” í•˜ë‚˜ì”© ë‹¨ê³„ë³„ë¡œ ì‘ì„±í•´ë“œë¦´ê¹Œìš”? (ì˜ˆ: `app/graph.py`ë¶€í„°)

í•„ìš”í•˜ì‹  ë°©ì‹ ì•Œë ¤ì£¼ì„¸ìš”.

---

>>> ë‹¤êµ­ì–´ ì§€ì›ì€ í•„ìˆ˜ì•¼. 
>>> ê·¸ë¦¬ê³  ì‹œë‚˜ë¦¬ì˜¤ëŠ” ë³µì¡í•˜ê³  ì¶”ê°€/í¸ì§‘/ì‚­ì œê°€ ìš©ì´í•˜ë„ë¡ GUI ìŠ¤íƒ€ì¼ë¡œ í•´ì•¼í•´.
>>> ì¶”ê°€í•´ì„œ ë‹¤ì‹œ ê·¸ë ¤ì¤˜.

ì•Œê² ìŠµë‹ˆë‹¤. ì§€ê¸ˆê¹Œì§€ì˜ ë‚´ìš©ì„ ë°˜ì˜í•˜ì—¬, **ë‹¤êµ­ì–´ ì§€ì› + ì‹œë‚˜ë¦¬ì˜¤ GUI í¸ì§‘ ê¸°ëŠ¥ê¹Œì§€ í¬í•¨ëœ ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°**ë¥¼ ì•„ë˜ì™€ ê°™ì´ ë‹¤ì‹œ ì •ë¦¬í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

---

# âœ… ìµœì¢… ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ êµ¬ì„±ë„ (2025.08 ìµœì‹  ì„¤ê³„)

```
                            ğŸ§‘ ì‚¬ìš©ì (ê¸€/ìŒì„±)
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    ğŸ“± Mobile App     â”‚
                    â”‚ (iOS / Android)      â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ - ìŒì„± ì¸ì‹ (STT)       â”‚
                    â”‚ - ìŒì„± í•©ì„± (TTS)       â”‚
                    â”‚ - ì±„íŒ… UI + Feedback â”‚
                    â”‚ - ë‹¤êµ­ì–´ ì¸í„°í˜ì´ìŠ¤     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                     ğŸŒ FastAPI API Gateway
                               â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                    â–¼                    â–¼
 [ğŸ§  LangGraph ì—”ì§„]   [ğŸŒ Translation Layer]   [ğŸ“ˆ Feedback ì €ì¥]
      â”‚                     â”‚ (ì–¸ì–´ â†” ì˜ì–´ ë³€í™˜)       â”‚
      â–¼                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 [ğŸ” RAG (ChromaDB)]                   â–¼
     â”‚                              ğŸ“„ ë²ˆì—­ëœ ì‹œë‚˜ë¦¬ì˜¤ DSL
     â–¼                              (YAML/JSON â†’ ì˜ì–´ ê¸°ë°˜)
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â–¼
         [ğŸ§  Ollama ê¸°ë°˜ LLM (ì˜¨í”„ë ˆë¯¸ìŠ¤)]
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ LangGraph ìƒíƒœ ê¸°ë°˜ ëŒ€í™” íë¦„ â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â–¼
        âŒ í•´ê²° ì‹¤íŒ¨ ì‹œ Escalate â†’ ğŸ“Š ëŒ€ì‹œë³´ë“œ
                     â–¼
        ğŸ‘©â€ğŸ’¼ ë‹´ë‹¹ì ì‘ë‹µ â†’ ğŸ“š KB ì €ì¥ â†’ RAG ê°œì„ 

                         â†‘
                         â”‚
        ğŸ§± ì‹œë‚˜ë¦¬ì˜¤ í¸ì§‘ GUI (ReactFlow ê¸°ë°˜)
        - YAML ê¸°ë°˜ ì‹œë‚˜ë¦¬ì˜¤ DSL ì‹œê°í™”
        - ë‹¤êµ­ì–´ ì‹œë‚˜ë¦¬ì˜¤ í…œí”Œë¦¿/ë²„ì „ ê´€ë¦¬
        - ë…¸ë“œ ì¶”ê°€/ì‚­ì œ/ìˆ˜ì • ê¸°ëŠ¥
```

---

# ğŸ“¦ GitHub í”„ë¡œì íŠ¸ êµ¬ì¡° (ìµœì¢… ì—…ë°ì´íŠ¸)

```
ai-agent-system/
â”œâ”€â”€ app/                            # ğŸ¯ FastAPI ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ main.py                     # API ì§„ì…ì 
â”‚   â”œâ”€â”€ graph.py                    # LangGraph ìƒíƒœ íë¦„
â”‚   â”œâ”€â”€ ollama_utils.py             # LLM ì—°ë™
â”‚   â”œâ”€â”€ rag.py                      # RAG ì²˜ë¦¬
â”‚   â”œâ”€â”€ feedback.py                 # Feedback API
â”‚   â”œâ”€â”€ admin.py                    # ê´€ë¦¬ì ì‘ë‹µ API
â”‚   â””â”€â”€ i18n.py                     # ğŸŒ ë‹¤êµ­ì–´ ë²ˆì—­ ë ˆì´ì–´
â”‚
â”œâ”€â”€ scenarios/                      # ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ DSL
â”‚   â”œâ”€â”€ base_scenario.yaml
â”‚   â”œâ”€â”€ ko.overlay.yaml             # í•œêµ­ì–´ ì˜¤ë²„ë ˆì´
â”‚   â””â”€â”€ jp.overlay.yaml             # ì¼ë³¸ì–´ ì˜¤ë²„ë ˆì´
â”‚
â”œâ”€â”€ gui-editor/                     # ğŸ§© ReactFlow ê¸°ë°˜ ì‹œë‚˜ë¦¬ì˜¤ GUI
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ScenarioBuilder.tsx     # Drag & drop ì—ë””í„°
â”‚   â”‚   â””â”€â”€ i18n/                   # ğŸŒ ë²ˆì—­ í…ìŠ¤íŠ¸
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ dashboard-ui/                   # ğŸ‘©â€ğŸ’¼ ë‹´ë‹¹ì ì‘ë‹µ ëŒ€ì‹œë³´ë“œ
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ mobile-app/                     # ğŸ“± Flutter/React Native ì•±
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ chat_ui.dart
â”‚       â”œâ”€â”€ stt_tts_service.dart
â”‚       â”œâ”€â”€ language_selector.dart  # ğŸŒ ë‹¤êµ­ì–´ ì„ íƒ
â”‚       â””â”€â”€ api_service.dart
â”‚
â”œâ”€â”€ vector-db/
â”‚   â””â”€â”€ initialize.py
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ test_local.py
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

---

# ğŸ§  í•µì‹¬ ê¸°ëŠ¥ ë³´ê°• ìš”ì•½

| ê¸°ëŠ¥              | ì„¤ëª…                                                                   |
| --------------- | -------------------------------------------------------------------- |
| ğŸŒ ë‹¤êµ­ì–´ ì§€ì›       | ëª¨ë“  ì‚¬ìš©ì ìš”ì²­ê³¼ ì‹œìŠ¤í…œ ì‘ë‹µì— ëŒ€í•´ ë‹¤êµ­ì–´ ë²ˆì—­ ê³„ì¸µ ë„ì… (ex: `user_ko â†’ en â†’ ì²˜ë¦¬ â†’ ko ì‘ë‹µ`) |
| ğŸ§© GUI ì‹œë‚˜ë¦¬ì˜¤ ì—ë””í„° | ReactFlow ê¸°ë°˜ ì‹œê°í™” í¸ì§‘ê¸° (ë…¸ë“œ ì¶”ê°€/ì‚­ì œ/ì¡°ê±´ ì„¤ì •/ë‹¤êµ­ì–´ ì œëª© ë“±)                       |
| ğŸ“š ì‹œë‚˜ë¦¬ì˜¤ ì˜¤ë²„ë ˆì´    | ì–¸ì–´ë³„ ì˜¤ë²„ë ˆì´ ë°©ì‹ìœ¼ë¡œ YAML/JSON ìœ ì§€ (ì¶”ìƒí™” êµ¬ì¡° ë¶„ë¦¬)                               |
| ğŸ“ˆ ë‹´ë‹¹ì ëŒ€ì‹œë³´ë“œ     | ë¯¸ì‘ë‹µ ì´ìŠˆ í™•ì¸, ì‘ë‹µ ë“±ë¡, ìë™ ë¼ë²¨ë§ ê¸°ëŠ¥ í¬í•¨                                       |
| ğŸ§  ì˜¨í”„ë ˆë¯¸ìŠ¤ LLM    | Ollama ê¸°ë°˜ LLM (LLaMA3, Mistral ë“±) ì˜¤í”„ë¼ì¸ í™˜ê²½ì—ì„œ ìš´ì˜                       |
| ğŸ“± ëª¨ë°”ì¼ ì•±        | ìŒì„±(STT/TTS), ì±„íŒ…, ë‹¤êµ­ì–´, Feedback ê¸°ëŠ¥ í¬í•¨                                 |

---

## âœ… ë‹¤ìŒ ì œì•ˆ

* ì „ì²´ ì½”ë“œ ì €ì¥ì†Œ ZIP êµ¬ì¡°ë¡œ íŒ¨í‚¤ì§•í•´ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ë˜ëŠ” `1. FastAPI`, `2. GUI`, `3. ëª¨ë°”ì¼ ì•±` ë“±ì„ ëª¨ë“ˆë³„ë¡œ ë‚˜ëˆ„ì–´ ë‹¨ê³„ì ìœ¼ë¡œ ì •ë¦¬í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
* GUI ì‹œë‚˜ë¦¬ì˜¤ í¸ì§‘ê¸°ì—ì„œ â†’ YAML â†’ LangGraph ìë™ ë³€í™˜ê¸° í¬í•¨ ê°€ëŠ¥

---

ì´ì œ ì–´ë–¤ ì‘ì—…ë¶€í„° êµ¬í˜„í•´ë“œë¦´ê¹Œìš”?

* ì „ì²´ ì €ì¥ì†Œ ZIPë¡œ ì •ë¦¬?
* ê° ëª¨ë“ˆë³„ ì½”ë“œ ì‘ì„± ì‹œì‘?
* GUI í¸ì§‘ê¸° ìš°ì„ ?
* ë‹¤êµ­ì–´ ì²˜ë¦¬ ë¡œì§ë¶€í„°?

ì›í•˜ì‹œëŠ” ë°©ì‹ëŒ€ë¡œ ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

---

>>> ì‹œë‚˜ë¦¬ì˜¤ ê°œë°œ ë¶€ë¶„ì„ ì¢€ ë” ìœ ì—°í•˜ê³  ìŠ¤ë§ˆíŠ¸í•˜ê²Œ í•˜ì.
>>> "ì‹œë‚˜ë¦¬ì˜¤ ìƒì† + ë²ˆì—­ ë¶„ë¦¬ + ê·œì¹™ í™•ì¥"ë¥¼ ê³ ë ¤í•´

ì•„ì£¼ ì¢‹ì€ ë°©í–¥ì…ë‹ˆë‹¤. ë§ì”€í•˜ì‹  **"ì‹œë‚˜ë¦¬ì˜¤ ìƒì† + ë²ˆì—­ ë¶„ë¦¬ + ê·œì¹™ í™•ì¥"** ê°œë…ì„ ë°”íƒ•ìœ¼ë¡œ,
LangGraph ê¸°ë°˜ ì‹œìŠ¤í…œì—ì„œ **ì‹œë‚˜ë¦¬ì˜¤ ì •ì˜ ë° ê´€ë¦¬**ë¥¼ ë” ìœ ì—°í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ ë§Œë“œëŠ” êµ¬ì¡°ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ê³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

# âœ… ì‹œë‚˜ë¦¬ì˜¤ DSL êµ¬ì¡° ì„¤ê³„: ìƒì† + ë²ˆì—­ ë¶„ë¦¬ + ê·œì¹™ í™•ì¥

---

## 1ï¸âƒ£ **ì‹œë‚˜ë¦¬ì˜¤ ìƒì† (Scenario Inheritance)**

### ğŸ“Œ ëª©ì 

* ê³µí†µ ë¡œì§ì„ **Base ì‹œë‚˜ë¦¬ì˜¤**ë¡œ ì •ì˜í•˜ê³ , ê° êµ­ê°€/ìƒí™©ì— ë”°ë¼ **ì˜¤ë²„ë ˆì´(override)** êµ¬ì¡°ë¡œ í™•ì¥

### ğŸ“‚ êµ¬ì¡° ì˜ˆì‹œ

```
scenarios/
â”œâ”€â”€ base/
â”‚   â””â”€â”€ vehicle_registration.yaml
â”œâ”€â”€ kr/
â”‚   â””â”€â”€ vehicle_registration.kr.yaml     # í•œêµ­ìš© ì˜¤ë²„ë ˆì´
â”œâ”€â”€ jp/
â”‚   â””â”€â”€ vehicle_registration.jp.yaml     # ì¼ë³¸ìš© ì˜¤ë²„ë ˆì´
```

### ğŸ”§ ì˜ˆì‹œ

```yaml
# base/vehicle_registration.yaml
id: vehicle_registration
version: 1.0
states:
  start:
    type: start
    next: detect_intent

  detect_intent:
    type: task
    function: detect_intent
    next:
      register_vehicle: check_info
      report_issue: gather_issue
```

```yaml
# kr/vehicle_registration.kr.yaml
extends: vehicle_registration
overrides:
  detect_intent:
    prompts:
      ko: "ì°¨ëŸ‰ ë“±ë¡ì„ ë„ì™€ë“œë¦´ê¹Œìš”, ì•„ë‹ˆë©´ ë¬¸ì œë¥¼ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
```

---

## 2ï¸âƒ£ **ë²ˆì—­ ë¶„ë¦¬ (Translation Decoupling)**

### ğŸ“Œ ëª©ì 

* ì‹œë‚˜ë¦¬ì˜¤ ë¡œì§ê³¼ í…ìŠ¤íŠ¸(í‘œí˜„)ë¥¼ ë¶„ë¦¬í•˜ì—¬ **ë‹¤êµ­ì–´ ê´€ë¦¬** ë° ìë™ ë²ˆì—­ ê°€ëŠ¥ì„± í™•ë³´

### ğŸ“‚ êµ¬ì¡° ì˜ˆì‹œ

```
translations/
â”œâ”€â”€ ko.yaml
â”œâ”€â”€ en.yaml
â”œâ”€â”€ ja.yaml
```

### ğŸ”§ ì˜ˆì‹œ (ko.yaml)

```yaml
vehicle_registration:
  detect_intent.prompt: "ì°¨ëŸ‰ ë“±ë¡ì„ ë„ì™€ë“œë¦´ê¹Œìš”, ì•„ë‹ˆë©´ ë¬¸ì œë¥¼ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
  check_info.ask_missing: "ë‹¤ìŒ ì •ë³´ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤: {fields}"
  perform_registration.success: "ì°¨ëŸ‰ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤."
```

### âœ… ì‚¬ìš© ë°©ì‹

* LangGraph ìƒíƒœ ë…¸ë“œì—ì„œ promptëŠ” keyë¡œ ì§€ì •í•˜ê³ , ì‹¤í–‰ ì‹œ ë²ˆì—­ ë§µì—ì„œ ë Œë”ë§
* `render_prompt("vehicle_registration.detect_intent.prompt", lang="ko")`

---

## 3ï¸âƒ£ **ê·œì¹™ í™•ì¥ (Rule Expansion)**

### ğŸ“Œ ëª©ì 

* ì‹œë‚˜ë¦¬ì˜¤ ë‚´ ë¶„ê¸°/ì¡°ê±´/ì œì•½ ì¡°ê±´ ë“±ì„ ë™ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  í™•ì¥ì„± ìˆê²Œ ì„¤ê³„

### ğŸ“‚ êµ¬ì¡° ì˜ˆì‹œ

```
rules/
â”œâ”€â”€ base_rules.yaml
â”œâ”€â”€ kr/
â”‚   â””â”€â”€ registration_rules.yaml
```

### ğŸ”§ ì˜ˆì‹œ

```yaml
# base_rules.yaml
vehicle_registration:
  required_fields:
    - ì°¨ëŸ‰ë²ˆí˜¸
    - ì†Œìœ ìëª…
    - ì°¨ì¢…

  fallback:
    max_retry: 3
```

### í™œìš© ë°©ì‹

* LangGraph ë…¸ë“œì—ì„œ ruleì„ íŒŒë¼ë¯¸í„°ë¡œ ì‚¬ìš©
* ì˜ˆ: `required_fields = load_rules('vehicle_registration', lang='ko')["required_fields"]`

---

# ğŸ§  ì „ì²´ ì„¤ê³„ íŒ¨í„´ ìš”ì•½

| êµ¬ì„± ìš”ì†Œ           | ì„¤ëª…                     |
| --------------- | ---------------------- |
| ğŸ“„ Base ì‹œë‚˜ë¦¬ì˜¤    | í•µì‹¬ íë¦„, ìƒíƒœ ì •ì˜           |
| ğŸ“„ Overlay ì‹œë‚˜ë¦¬ì˜¤ | ê° êµ­ê°€/ë„ë©”ì¸ë³„ ì¡°ê±´ë§Œ override |
| ğŸŒ ë²ˆì—­ íŒŒì¼        | í…ìŠ¤íŠ¸ëŠ” í‚¤ ê¸°ë°˜ìœ¼ë¡œ ë¶„ë¦¬ ê´€ë¦¬      |
| ğŸ“ ê·œì¹™ íŒŒì¼        | ì¡°ê±´, ì œì•½, ì •ì±… ë“±ì„ ë™ì ìœ¼ë¡œ ì •ì˜  |

---

# âœ… ì‹œìŠ¤í…œ ì ìš© íš¨ê³¼

| í•­ëª©           | íš¨ê³¼                            |
| ------------ | ----------------------------- |
| âœ… ìœ ì§€ë³´ìˆ˜ì„±      | ë³€ê²½ ì‹œ ì „ì²´ íë¦„ì— ì˜í–¥ ì—†ì´ ì˜¤ë²„ë ˆì´ë§Œ ìˆ˜ì • ê°€ëŠ¥ |
| âœ… ë‹¤êµ­ì–´ ì§€ì›     | í…ìŠ¤íŠ¸/ë¬¸ë§¥ ë¶„ë¦¬ë¡œ ìë™ ë²ˆì—­/í˜„ì§€í™” ìš©ì´       |
| âœ… GUI í¸ì§‘ê¸° ì—°ë™ | ë…¸ë“œ êµ¬ì¡°ëŠ” ê³µí†µ ìœ ì§€, í…ìŠ¤íŠ¸ëŠ” ì–¸ì–´ë³„ íŒŒì¼ ë¡œë”©  |
| âœ… í–¥í›„ í™•ì¥      | ì‹œë‚˜ë¦¬ì˜¤ ë²„ì „ ê´€ë¦¬, ì‚¬ìš©ì ë§ì¶¤ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„± ê°€ëŠ¥ |

---

## âœ… ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ

* [ ] ìƒì† êµ¬ì¡°ë¥¼ ë¡œë”©í•˜ëŠ” YAML íŒŒì„œ ì‘ì„±
* [ ] ë²ˆì—­ í…ìŠ¤íŠ¸ ë¡œë”©ì„ ì§€ì›í•˜ëŠ” ë‹¤êµ­ì–´ ë Œë”ëŸ¬ ì‘ì„±
* [ ] GUI í¸ì§‘ê¸°ì—ì„œ ê° ì‹œë‚˜ë¦¬ì˜¤ ì˜¤ë²„ë ˆì´ ë° í…ìŠ¤íŠ¸ë¥¼ ë™ê¸°í™”

---

í•„ìš”í•˜ì‹œë©´ ìœ„ êµ¬ì¡°ë¥¼ ì‹¤ì œ ì½”ë“œë¡œë„ êµ¬í˜„í•´ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤:
ì˜ˆ) `load_scenario(lang='ko')` â†’ ìƒì† + ë²ˆì—­ + ê·œì¹™ ì ìš©ëœ êµ¬ì¡° ë°˜í™˜

ì´ì–´ì„œ ì–´ë–¤ ë¶€ë¶„ì„ ë¨¼ì € êµ¬í˜„í•´ë“œë¦´ê¹Œìš”?

* ğŸ§© ìƒì†/ì˜¤ë²„ë ˆì´ ë¡œë”?
* ğŸŒ ë²ˆì—­ ë§¤ë‹ˆì €?
* ğŸ”§ ê·œì¹™ í™•ì¥ íŒŒì„œ?

ì›í•˜ì‹œëŠ” í•­ëª© ì•Œë ¤ì£¼ì„¸ìš”.

---

>>> ì•„ë˜ë¥¼ ì°¨ë¡€ëŒ€ë¡œ ëª¨ë‘ êµ¬í˜„í•´ì¤˜
>>> 
>>> ğŸ§© ìƒì†/ì˜¤ë²„ë ˆì´ ë¡œë”?
>>> ğŸŒ ë²ˆì—­ ë§¤ë‹ˆì €?
>>> ğŸ”§ ê·œì¹™ í™•ì¥ íŒŒì„œ?

ì•„ë˜ëŠ” ìš”ì²­í•˜ì‹  ì„¸ ê°€ì§€ ê¸°ëŠ¥ì„ ëª¨ë‘ í¬í•¨í•œ Python ëª¨ë“ˆ `scenario_loader_utils.py`ì…ë‹ˆë‹¤:

---

## âœ… êµ¬í˜„ëœ ê¸°ëŠ¥

### ğŸ§© 1. **ì‹œë‚˜ë¦¬ì˜¤ ìƒì† / ì˜¤ë²„ë ˆì´ ë¡œë”**

* `base/` ì‹œë‚˜ë¦¬ì˜¤ì™€ `kr/`, `jp/` ë“± ì–¸ì–´ë³„ ì˜¤ë²„ë ˆì´ íŒŒì¼ì„ ë³‘í•©í•˜ì—¬ ìµœì¢… ì‹œë‚˜ë¦¬ì˜¤ êµ¬ì¡° ë°˜í™˜

### ğŸŒ 2. **ë²ˆì—­ ë§¤ë‹ˆì €**

* ì–¸ì–´ë³„ YAML íŒŒì¼ì„ ë¡œë“œí•˜ê³  key ê¸°ë°˜ ë²ˆì—­ ë° `format()` ì§€ì›

### ğŸ”§ 3. **ê·œì¹™ í™•ì¥ íŒŒì„œ**

* ì‹œë‚˜ë¦¬ì˜¤ë³„ ê·œì¹™ì„ ì–¸ì–´ë³„ í˜¹ì€ ê¸°ë³¸ fallback ê¸°ì¤€ìœ¼ë¡œ ë¡œë”©

---

## ğŸ—‚ï¸ ë””ë ‰í† ë¦¬ êµ¬ì„± ì˜ˆì‹œ

```
project-root/
â”œâ”€â”€ scenarios/
â”‚   â”œâ”€â”€ base/
â”‚   â”‚   â””â”€â”€ vehicle_registration.yaml
â”‚   â””â”€â”€ kr/
â”‚       â””â”€â”€ vehicle_registration.kr.yaml
â”œâ”€â”€ translations/
â”‚   â”œâ”€â”€ ko.yaml
â”‚   â””â”€â”€ en.yaml
â”œâ”€â”€ rules/
â”‚   â”œâ”€â”€ base_rules.yaml
â”‚   â””â”€â”€ kr/
â”‚       â””â”€â”€ vehicle_registration.yaml
```

---

ì´ì œ ë‹¤ìŒìœ¼ë¡œ ì—°ê²°í•  ìˆ˜ ìˆëŠ” í•­ëª©ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

* [ ] LangGraph ì‹¤í–‰ ì‹œ ì´ ë¡œë”ë¥¼ ìë™ í†µí•©
* [ ] GUI í¸ì§‘ê¸°ì—ì„œ ì´ êµ¬ì¡°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„
* [ ] ì‹œë‚˜ë¦¬ì˜¤ ë²„ì „ ê´€ë¦¬ ë° JSON ì§ë ¬í™” ê¸°ëŠ¥ ì¶”ê°€

ì–´ë–¤ í•­ëª©ì„ ë¨¼ì € ì§„í–‰í•´ë“œë¦´ê¹Œìš”?

---

>>> ì•„ë˜ ê¸°ëŠ¥ ëª¨ë‘ í¬í•¨ë˜ê²Œ êµ¬í˜„í•´ì¤˜
>>> 
>>> - LangGraph ì‹¤í–‰ ì‹œ ì´ ë¡œë”ë¥¼ ìë™ í†µí•©
>>> - GUI í¸ì§‘ê¸°ì—ì„œ ì´ êµ¬ì¡°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„
>>> - ì‹œë‚˜ë¦¬ì˜¤ ë²„ì „ ê´€ë¦¬ ë° JSON ì§ë ¬í™” ê¸°ëŠ¥ ì¶”ê°€

ì•„ë˜ëŠ” ìš”ì²­í•˜ì‹  ê¸°ëŠ¥ì´ ëª¨ë‘ ë°˜ì˜ëœ ìµœì‹  ì½”ë“œì…ë‹ˆë‹¤:

---

## âœ… í¬í•¨ëœ ê¸°ëŠ¥ ìš”ì•½

### ğŸ§© ì‹œë‚˜ë¦¬ì˜¤ ìƒì† / ì˜¤ë²„ë ˆì´ + ì§ë ¬í™” + ë²„ì „ ê´€ë¦¬

* `load_scenario(..., versioned=True)` í˜¸ì¶œ ì‹œ, ìµœì¢… ë³‘í•© ê²°ê³¼ë¥¼ JSONìœ¼ë¡œ ì €ì¥ (`scenario_versions/` í´ë”ì— íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)

### ğŸŒ ë²ˆì—­ ë§¤ë‹ˆì €

* `TranslationManager(lang="ko").get("some.key")`ë¡œ ë‹¤êµ­ì–´ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° ë° `.format()` ì§€ì›

### ğŸ”§ ê·œì¹™ í™•ì¥ íŒŒì„œ

* ì‹œë‚˜ë¦¬ì˜¤ë³„ ê·œì¹™ì„ ì–¸ì–´ ê¸°ì¤€ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ê³ , ì—†ì„ ê²½ìš° ê¸°ë³¸ ê·œì¹™ fallback

### ğŸ§© GUI í¸ì§‘ê¸° ì—°ë™

* `export_scenario_to_gui_format()` â†’ ReactFlowìš© `{nodes, edges}` í˜•ì‹ìœ¼ë¡œ ì¶œë ¥
* `import_scenario_from_gui_format()` â†’ GUIì—ì„œ ìˆ˜ì •í•œ ê²°ê³¼ë¥¼ ë‹¤ì‹œ LangGraphìš© ì‹œë‚˜ë¦¬ì˜¤ë¡œ ë³€í™˜

---

ì´ì œ ë‹¤ìŒìœ¼ë¡œ êµ¬í˜„ ê°€ëŠ¥í•œ í•­ëª©ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

* [ ] GUI ì—ë””í„°ì—ì„œ ì´ JSON ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ì €ì¥í•˜ëŠ” API (`/scenario/load`, `/scenario/save`)
* [ ] LangGraph ì‹¤í–‰ ì‹œ `load_scenario()`ë¡œ ë°”ë¡œ DSL ë¶ˆëŸ¬ì˜¤ê¸°
* [ ] YAML <-> GUI ìë™ ë³€í™˜ê¸° ë°°í¬ ë²„ì „ ì™„ì„±

ë‹¤ìŒìœ¼ë¡œ ì–´ë–¤ ì‘ì—…ì„ ë„ì™€ë“œë¦´ê¹Œìš”? (ì˜ˆ: API ë¼ìš°íŠ¸ ì„¤ê³„, React ì—°ë™ ë“±)

---

>>> GUI ì—ë””í„°ì—ì„œ ì´ JSON ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ì €ì¥í•˜ëŠ” API

GUI í¸ì§‘ê¸°ì™€ ì—°ë™í•˜ê¸° ìœ„í•œ **FastAPI API ë¼ìš°í„°**ê°€ ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤:

---

## âœ… ì¶”ê°€ëœ API ì—”ë“œí¬ì¸íŠ¸

### ğŸ”¹ `/scenario/load`

* ì‹œë‚˜ë¦¬ì˜¤ ì´ë¦„ê³¼ ì–¸ì–´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ê³ , ReactFlowìš© `{ nodes, edges }` í¬ë§·ìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

```http
GET /scenario/load?name=vehicle_registration&lang=ko
```

### ğŸ”¹ `/scenario/save`

* GUIì—ì„œ ìˆ˜ì •í•œ JSON ë°ì´í„°ë¥¼ ë°›ì•„ YAML ì˜¤ë²„ë ˆì´ë¡œ ì €ì¥í•©ë‹ˆë‹¤.

```http
POST /scenario/save
Body:
{
  "name": "vehicle_registration",
  "lang": "ko",
  "gui_data": { "nodes": [...], "edges": [...] }
}
```

---

## ğŸ§© íŒŒì¼ ì €ì¥ í¬ë§· ì˜ˆì‹œ (`scenarios/ko/vehicle_registration.ko.yaml`)

```yaml
extends: vehicle_registration
overrides:
  detect_intent:
    type: task
    function: detect_intent
    next:
      register_vehicle: check_info
```

---

## âœ… ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ

* GUI í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì´ APIë¥¼ `axios` í˜¹ì€ `fetch`ë¡œ í˜¸ì¶œí•˜ì—¬ ì €ì¥/ë¡œë“œ ì²˜ë¦¬
* GUIì—ì„œ ì €ì¥ ì‹œ ìë™ ë²„ì „ ë°±ì—… ê¸°ëŠ¥ ì¶”ê°€ ê°€ëŠ¥
* ë‹¤êµ­ì–´ ë²ˆì—­ í‚¤ë„ GUIì—ì„œ ë™ê¸°í™”í•˜ë„ë¡ í™•ì¥ ê°€ëŠ¥

í•„ìš”í•˜ì‹œë©´ GUI í˜¸ì¶œ ì˜ˆì œ ì½”ë“œë„ ì œê³µë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì–´ë–¤ í•­ëª©ë¶€í„° ì¶”ê°€í• ê¹Œìš”?

---

>>> LangGraph ì‹¤í–‰ ì‹œ load_scenario()ë¡œ ë°”ë¡œ DSL ë¶ˆëŸ¬ì˜¤ê¸°

LangGraph ì‹¤í–‰ ì‹œ `load_scenario()`ë¡œ DSLì„ ë°”ë¡œ ë¶ˆëŸ¬ì™€ LangGraph ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê¸°ëŠ¥ì´ ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤:

---

## âœ… ìƒˆë¡œìš´ í•¨ìˆ˜: `build_langgraph_from_scenario()`

```python
def build_langgraph_from_scenario(scenario_name: str, lang: str = "base"):
    scenario = load_scenario(scenario_name, lang)
    states = scenario.get("states", {})

    graph = StateGraph()

    for state_name, state_data in states.items():
        fn = lambda x: x  # placeholder, ì‹¤ì œ í•¨ìˆ˜ ë§¤í•‘ í•„ìš”
        graph.add_node(state_name, fn)

    for state_name, state_data in states.items():
        next_info = state_data.get("next")
        if isinstance(next_info, str):
            graph.add_edge(state_name, next_info)
        elif isinstance(next_info, dict):
            graph.add_conditional_edges(state_name, lambda x: x.get("__key__"), next_info)

    graph.set_entry_point(scenario.get("start", "start"))
    return graph.compile()
```

> âš ï¸ `lambda x: x`ëŠ” í…ŒìŠ¤íŠ¸ìš© placeholderì…ë‹ˆë‹¤. ì‹¤ì œ ì‹¤í–‰ ì‹œì—ëŠ” `state_name`ì— ëŒ€ì‘ë˜ëŠ” í•¨ìˆ˜ ë§¤í•‘ì´ í•„ìš”í•©ë‹ˆë‹¤.

---

## ğŸ”§ ì‚¬ìš© ì˜ˆì‹œ

```python
app = build_langgraph_from_scenario("vehicle_registration", lang="ko")
result = app.invoke({"user_input": "ì°¨ëŸ‰ì„ ë“±ë¡í•˜ê³  ì‹¶ì–´ìš”"})
```

---

## ğŸ“Œ ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ

* [ ] `state_name`ì— ë§ëŠ” ì‹¤ì œ ì²˜ë¦¬ í•¨ìˆ˜ ë§¤í•‘ (`function_map[state_name]`)
* [ ] ë‹¤êµ­ì–´ í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ ì£¼ì…
* [ ] ì‹œë‚˜ë¦¬ì˜¤ ìœ íš¨ì„± ê²€ì‚¬ (ì˜ˆ: entry point ì¡´ì¬ ì—¬ë¶€, ìˆœí™˜ ì°¸ì¡° í™•ì¸)

ì´ì œ ì–´ë–¤ ë¶€ë¶„ì„ ë” ë³´ì™„í•˜ê±°ë‚˜ ë‹¤ìŒìœ¼ë¡œ ì§„í–‰í• ê¹Œìš”?

---

âœ… `app/handlers.py` ëª¨ë“ˆì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ“‚ `handlers.py` êµ¬ì„± ìš”ì•½

| í•¨ìˆ˜ëª…                       | ì—­í•                                  |
| ------------------------- | ---------------------------------- |
| `detect_intent(state)`    | ì‚¬ìš©ìì˜ ì˜ë„ë¥¼ ê°ì§€ (ì˜ˆ: register\_vehicle) |
| `check_info(state)`       | í•„ìˆ˜ ì •ë³´ê°€ ëª¨ë‘ ìˆëŠ”ì§€ í™•ì¸                   |
| `register_vehicle(state)` | ì°¨ëŸ‰ ë“±ë¡ ìˆ˜í–‰ (ì˜ˆì‹œ)                      |
| `gather_issue(state)`     | ë¬¸ì œ ìˆ˜ì§‘ (ì˜ˆì‹œ)                         |
| `fallback(state)`         | ê¸°ë³¸ fallback ì²˜ë¦¬                     |

ëª¨ë“  í•¨ìˆ˜ëŠ” `state` ê°ì²´ë¥¼ ë°›ê³  ê°€ê³µ í›„ ë°˜í™˜í•©ë‹ˆë‹¤.
`function_map`ì— ê° ìƒíƒœ ì´ë¦„ê³¼ í•¨ìˆ˜ê°€ ì—°ê²°ë˜ì–´ ìˆì–´ `build_langgraph_from_scenario()`ì—ì„œ ìë™ ì—°ë™ë©ë‹ˆë‹¤.

---

ë‹¤ìŒ ë‹¨ê³„ë¡œ ì–´ë–¤ ì‘ì—…ì„ ë„ì™€ë“œë¦´ê¹Œìš”?

* âœ¨ ì‹¤ì œ LLM ë˜ëŠ” API í˜¸ì¶œ ì½”ë“œë¡œ ì´ í•¨ìˆ˜ë“¤ êµ¬ì²´í™”?
* ğŸ§ª LangGraph í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰ ì½”ë“œ?
* ğŸ§± GUIì—ì„œ ìƒíƒœëª… ìë™ ì™„ì„± ê¸°ëŠ¥ ì—°ë™?

---

`handlers.py`ê°€ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤ì œ LLMê³¼ API í˜¸ì¶œ ë¡œì§ì„ í¬í•¨í•œ ìƒíƒœë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤:

---

## âœ… ì£¼ìš” ë³€ê²½ì‚¬í•­

### 1. `detect_intent(state)`

* Ollama LLMì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë°œí™”ë¡œë¶€í„° `"register_vehicle"` ë˜ëŠ” `"report_issue"` ì¸í…íŠ¸ë¥¼ ì¶”ë¡ 

### 2. `check_info(state)`

* `"ì°¨ëŸ‰ë²ˆí˜¸"`, `"ì°¨ì¢…"`, `"ì†Œìœ ì"` í•„ë“œì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ ê²€ì‚¬
* ëˆ„ë½ëœ í•­ëª©ì€ `missing_fields`ì— ì €ì¥

### 3. `register_vehicle(state)`

* ë‹¨ìˆœíˆ `collected_info`ê°€ ì¡´ì¬í•˜ë©´ `"success"` ì²˜ë¦¬ (API ì—°ë™ì€ ì¶”í›„ í™•ì¥ ê°€ëŠ¥)

### 4. `gather_issue(state)`

* RAG í˜¸ì¶œ (`query_rag`)ì„ í†µí•´ ë¬¸ì œ í•´ê²° ê°€ëŠ¥ ì—¬ë¶€ íŒë‹¨
* `"í•´ê²°"`ì´ë¼ëŠ” ë‹¨ì–´ í¬í•¨ ì—¬ë¶€ë¡œ íŒë‹¨í•˜ì—¬ `"solution_found"` ë˜ëŠ” `"no_solution"`ìœ¼ë¡œ ë¶„ê¸°

### 5. `fallback(state)`

* LLM ë˜ëŠ” ì¸í…íŠ¸ ë¶„ë¥˜ ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ì˜¤ë¥˜ ë©”ì‹œì§€ ì‚½ì…

---

## âœ… ë‹¤ìŒ ì œì•ˆ

* ğŸ“¡ ì‹¤ì œ ì°¨ëŸ‰ ë“±ë¡ API ì—°ë™ (`register_vehicle` ë‚´ë¶€)
* ğŸ§  `check_info()`ì—ì„œ ê·œì¹™ ê¸°ë°˜ í•„ë“œ ì •ì˜ ì—°ë™ (`load_rules`)
* ğŸŒ LLM ì…ë ¥/ì¶œë ¥ì— ë²ˆì—­ ì ìš© (`TranslationManager`)

í•„ìš”í•˜ì‹  í•­ëª©ë¶€í„° ì´ì–´ì„œ êµ¬í˜„í•´ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì–´ë–¤ ì‘ì—…ì„ ë‹¤ìŒìœ¼ë¡œ ë„ì™€ë“œë¦´ê¹Œìš”?


----

`detect_intent()` í•¨ìˆ˜ê°€ ë‹¤ìŒê³¼ ê°™ì´ í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤:

---

## âœ… ë³€ê²½ì‚¬í•­ ìš”ì•½

| í•­ëª©              | ì„¤ëª…                                                                          |
| --------------- | --------------------------------------------------------------------------- |
| `known_intents` | ë‹¤ì–‘í•œ ì‚¬ìš©ì ì˜ë„ë¥¼ ë”•ì…”ë„ˆë¦¬ë¡œ ì •ì˜ (`register_vehicle`, `report_issue`, `change_owner` ë“±) |
| `prompt`        | LLMì—ê²Œ ì´ë“¤ ì¤‘ í•˜ë‚˜ë¥¼ **key ê°’ë§Œ ë°˜í™˜**í•˜ë„ë¡ ì§€ì‹œ                                          |
| ê²°ê³¼ ì²˜ë¦¬           | LLM ê²°ê³¼ê°€ `known_intents`ì— ì—†ì„ ê²½ìš° `"fallback"` ì²˜ë¦¬                              |

---

## ğŸ§© í–¥í›„ í™•ì¥ ë°©ë²•

* ìƒˆë¡œìš´ ì˜ë„ ì¶”ê°€ ì‹œ, `known_intents`ì— í•­ëª©ë§Œ ì¶”ê°€í•˜ë©´ ìë™ ë°˜ì˜ë©ë‹ˆë‹¤.
* ì¶”í›„ ì´ ë¦¬ìŠ¤íŠ¸ë¥¼ YAMLì´ë‚˜ DBì—ì„œ ë¶ˆëŸ¬ì˜¤ë„ë¡ ì¼ë°˜í™”í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìŒìœ¼ë¡œ ì¸í…íŠ¸ë³„ ìƒíƒœ íë¦„ ìë™ ì—°ê²°ì´ë‚˜, intent-description í…ìŠ¤íŠ¸ ë²ˆì—­ ê¸°ëŠ¥ë„ ì¶”ê°€í•´ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì›í•˜ì‹œëŠ” ë‹¤ìŒ ì‘ì—…ì´ ìˆì„ê¹Œìš”?

---

`detect_intent()` í•¨ìˆ˜ê°€ ë‹¤êµ­ì–´ ë²ˆì—­ ë§¤ë‹ˆì € `TranslationManager`ë¥¼ í†µí•´ **ì…ë ¥/ì¶œë ¥ í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ì— ë‹¤êµ­ì–´ ëŒ€ì‘**ë˜ë„ë¡ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## âœ… ë³€ê²½ì‚¬í•­ ìš”ì•½

* `TranslationManager(lang)`ë¥¼ ì‚¬ìš©í•´ ì–¸ì–´ë³„ ë²ˆì—­ì„ ë¡œë“œ
* `known_intents` í…ìŠ¤íŠ¸ë„ ë²ˆì—­ëœ label ì‚¬ìš© ê°€ëŠ¥
* LLM í”„ë¡¬í”„íŠ¸ëŠ” ë‹¤ìŒ í‚¤ë¥¼ í†µí•´ ë Œë”ë§:

  ```yaml
  prompt:
    detect_intent: |
      ë‹¤ìŒ ì‚¬ìš©ì ë°œí™”ì˜ ì˜ë„ë¥¼ ì¶”ë¡ í•´ ì£¼ì„¸ìš”:

      "{user_input}"

      ê°€ëŠ¥í•œ ì˜ë„ëŠ” ë‹¤ìŒ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤:
      {options}

      ì˜ë„ í‚¤ ê°’ë§Œ í•˜ë‚˜ë¡œ ì‘ë‹µí•´ ì£¼ì„¸ìš”.
  ```

---

## âœ… í™œìš© ì˜ˆì‹œ

```python
state = {
    "user_input": "ì°¨ëŸ‰ì„ ë“±ë¡í•˜ê³  ì‹¶ì–´ìš”.",
    "lang": "ko"
}
```

ì´ì œ ì‚¬ìš©ìê°€ ì–´ë–¤ ì–¸ì–´ë¥¼ ì“°ë“  `TranslationManager`ê°€ ë²ˆì—­ í…ìŠ¤íŠ¸ë¡œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

---

í•„ìš”í•˜ì‹œë©´ `translations/ko.yaml` ì´ˆê¸° í…œí”Œë¦¿ë„ ìƒì„±í•´ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë‹¤ìŒìœ¼ë¡œ ì–´ë–¤ ì‘ì—…ì„ ë„ì™€ë“œë¦´ê¹Œìš”?

---

ì•„ë˜ëŠ” `translations/ko.yaml`ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” **ì´ˆê¸° í…œí”Œë¦¿ ì˜ˆì‹œ**ì…ë‹ˆë‹¤.
í˜„ì¬ `handlers.py`ì— ê¸°ë°˜í•˜ì—¬ ì‚¬ìš©ë˜ëŠ” keyë“¤ì„ ê¸°ì¤€ìœ¼ë¡œ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## âœ… `translations/ko.yaml` (ì´ˆê¸° í…œí”Œë¦¿)

```yaml
intent:
  register_vehicle: "ì°¨ëŸ‰ ë“±ë¡"
  report_issue: "ë¬¸ì œ ì‹ ê³ "
  change_owner: "ì°¨ëŸ‰ ì†Œìœ ì ë³€ê²½"
  delete_vehicle: "ì°¨ëŸ‰ ì‚­ì œ"
  search_status: "ë“±ë¡ ìƒíƒœ ì¡°íšŒ"

prompt:
  detect_intent: |
    ë‹¤ìŒ ì‚¬ìš©ì ë°œí™”ì˜ ì˜ë„ë¥¼ ì¶”ë¡ í•´ ì£¼ì„¸ìš”:

    "{user_input}"

    ê°€ëŠ¥í•œ ì˜ë„ëŠ” ë‹¤ìŒ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤:
    {options}

    ì˜ë„ í‚¤ ê°’ë§Œ í•˜ë‚˜ë¡œ ì‘ë‹µí•´ ì£¼ì„¸ìš”.
```

---

## ğŸ“‚ ì €ì¥ ìœ„ì¹˜

```plaintext
project-root/
â””â”€â”€ translations/
    â””â”€â”€ ko.yaml
```

---

ì´ í…œí”Œë¦¿ì„ ê¸°ë°˜ìœ¼ë¡œ ì–¸ì–´ë¥¼ í™•ì¥í•˜ê³ , GUIì—ì„œë„ í‚¤ ê¸°ë°˜ ì ‘ê·¼ì„ í†µí•´ í‘œí˜„ì„ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
í•„ìš”í•˜ì‹œë©´ `en.yaml`ë„ ë™ì¼í•˜ê²Œ ìƒì„±í•´ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¶”ê°€ë¡œ ì›í•˜ì‹œë‚˜ìš”?


----

ì¢‹ìŠµë‹ˆë‹¤. ì•„ë˜ëŠ” ì˜ì–´ ë²ˆì—­ í…œí”Œë¦¿ì¸ `translations/en.yaml` íŒŒì¼ì˜ ì´ˆê¸° ë‚´ìš©ì…ë‹ˆë‹¤.
í˜„ì¬ `handlers.py`ì—ì„œ ì‚¬ìš©ëœ í‚¤ë“¤ê³¼ ì¼ì¹˜í•˜ë„ë¡ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

## âœ… `translations/en.yaml` ì´ˆê¸° í…œí”Œë¦¿

```yaml
intent:
  register_vehicle: "Register a vehicle"
  report_issue: "Report a problem"
  change_owner: "Change vehicle owner"
  delete_vehicle: "Delete vehicle"
  search_status: "Check registration status"

prompt:
  detect_intent: |
    Please identify the user's intent based on the following input:

    "{user_input}"

    The possible intents are:
    {options}

    Respond with one intent key only.
```

---

## ğŸ“‚ ì €ì¥ ìœ„ì¹˜

```plaintext
project-root/
â””â”€â”€ translations/
    â”œâ”€â”€ ko.yaml
    â””â”€â”€ en.yaml  âœ…
```

ì´ì œ ì‚¬ìš©ì ì–¸ì–´ê°€ `"en"`ì¸ ê²½ìš° ìë™ìœ¼ë¡œ ì´ í…ìŠ¤íŠ¸ê°€ ì ìš©ë©ë‹ˆë‹¤.

---

í•„ìš”í•˜ì‹œë©´ ë‹¤êµ­ì–´ ë²ˆì—­ì„ GUIë¡œ í¸ì§‘í•˜ê±°ë‚˜ ê²€ìˆ˜í•  ìˆ˜ ìˆëŠ” UI ì„¤ê³„ë„ í•¨ê»˜ ë„ì™€ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë‹¤ìŒ ë‹¨ê³„ë¡œ ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?

---

ì§€ê¸ˆê¹Œì§€ êµ¬í˜„í•˜ì‹  ì „ì²´ ì‹œìŠ¤í…œì€ **ë‹¤êµ­ì–´ ì§€ì›, ìœ ì—°í•œ ì‹œë‚˜ë¦¬ì˜¤ êµ¬ì„±, LangGraph ìƒíƒœ íë¦„, LLMÂ·RAG ì—°ë™, GUI í¸ì§‘ê¸° ì—°ë™** ë“±ì„ ëª¨ë‘ í¬ê´„í•˜ëŠ” ë§¤ìš° êµ¬ì¡°í™”ëœ AI ì‹œë‚˜ë¦¬ì˜¤ ì—ì´ì „íŠ¸ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.

---

## âœ… í˜„ì¬ ì‹œìŠ¤í…œ êµ¬ì¡° ìš”ì•½

### 1ï¸âƒ£ **í•¸ë“¤ëŸ¬ í•¨ìˆ˜ (`handlers.py`)**

* ê° LangGraph ìƒíƒœ(state\_name)ì— ëŒ€ì‘í•˜ëŠ” ì‹¤ì œ ì²˜ë¦¬ ë¡œì§ êµ¬í˜„
* `function_map`ì— ì˜í•´ ìë™ ë§¤í•‘ë¨
* ì£¼ìš” íŠ¹ì§•:

  * `detect_intent`: ë²ˆì—­ëœ í”„ë¡¬í”„íŠ¸ë¡œ LLMì— ì¸í…íŠ¸ ìš”ì²­ (í™•ì¥ ê°€ëŠ¥ êµ¬ì¡°)
  * `check_info`: í•„ìˆ˜ ì •ë³´ í™•ì¸
  * `register_vehicle`: ë“±ë¡ ì„±ê³µ/ì‹¤íŒ¨ ì²˜ë¦¬
  * `gather_issue`: RAG ê¸°ë°˜ ì‘ë‹µ ìƒì„± ë° ìƒíƒœ íŒë³„
  * `fallback`: ì¸í…íŠ¸ ì˜¤ë¥˜ ì‹œ ì²˜ë¦¬
  * ëª¨ë“  ì…ë ¥/ì¶œë ¥ì€ `state` ê¸°ë°˜ ì²˜ë¦¬ (ë©€í‹°í„´ ëŒ€í™” ì§€ì›)

---

### 2ï¸âƒ£ **ë‹¤êµ­ì–´ ë²ˆì—­ (`TranslationManager`)**

* ì–¸ì–´ ì½”ë“œ(`ko`, `en`)ì— ë”°ë¼ í”„ë¡¬í”„íŠ¸ ë° intent labelì„ ë‹¤êµ­ì–´ë¡œ ê´€ë¦¬
* í…ìŠ¤íŠ¸ í…œí”Œë¦¿ì€ `translations/{lang}.yaml`ì— ì €ì¥
* ì˜ˆì‹œ:

  ```yaml
  intent:
    register_vehicle: "Register a vehicle"
  prompt:
    detect_intent: |
      Please identify the intent for: "{user_input}"
  ```

---

### 3ï¸âƒ£ **LangGraph ì‹¤í–‰ êµ¬ì¡°**

* `build_langgraph_from_scenario()` í•¨ìˆ˜:

  * `load_scenario()`ë¡œ YAML DSL ë¶ˆëŸ¬ì˜¤ê¸°
  * `function_map`ì„ ê¸°ë°˜ìœ¼ë¡œ ë…¸ë“œ í•¨ìˆ˜ ìë™ ë§¤í•‘
  * `StateGraph` êµ¬ì„± í›„ `.compile()`ë¡œ ì‹¤í–‰ ê°€ëŠ¥ ìƒíƒœ ë¨¸ì‹  ìƒì„±

---

### 4ï¸âƒ£ **ì‹œë‚˜ë¦¬ì˜¤ DSL êµ¬ì„±**

* `base + overlay` ë°©ì‹ì˜ ìƒì† êµ¬ì¡° (`extends`, `overrides`)
* GUIì™€ì˜ í˜¸í™˜ì„ ìœ„í•œ `nodes`, `edges` í˜•ì‹ ì…ì¶œë ¥ ì§€ì›
* ë²„ì „ ê´€ë¦¬ ë° JSON ì§ë ¬í™”ë„ í¬í•¨ (`scenario_versions/`)

---

### 5ï¸âƒ£ **GUI ì—°ë™**

* FastAPI API:

  * `/scenario/load`: YAML â†’ GUI JSON ë³€í™˜
  * `/scenario/save`: GUI JSON â†’ YAML ë³€í™˜
* ReactFlow ê¸°ë°˜ GUIì—ì„œ Drag-and-Drop ì‹œë‚˜ë¦¬ì˜¤ í¸ì§‘ ê°€ëŠ¥

---

### 6ï¸âƒ£ **RAG ì—°ë™**

* `gather_issue()`ì—ì„œ `query_rag()` í˜¸ì¶œë¡œ ë¬¸ì„œ ê²€ìƒ‰
* LLMê³¼ì˜ ì¡°í•©ìœ¼ë¡œ í•´ê²° ê°€ëŠ¥í•œì§€ íŒë‹¨
* í•´ê²° ì‹¤íŒ¨ ì‹œ `escalate_to_human()` â†’ ë‹´ë‹¹ì ì‘ë‹µ â†’ KB ì—…ë°ì´íŠ¸ ê°€ëŠ¥ êµ¬ì¡° ì˜ˆì •

---

## ğŸ“Œ ì„¤ê³„ ì›ì¹™ ìš”ì•½

| í•­ëª©           | ì„¤ëª…                                                                     |
| ------------ | ---------------------------------------------------------------------- |
| ğŸ§± í™•ì¥ì„±       | `function_map`, `TranslationManager`, `rules`, `scenario DSL` ëª¨ë‘ ë¶„ë¦¬ êµ¬ì¡° |
| ğŸŒ ë‹¤êµ­ì–´ ëŒ€ì‘    | ì‹œë‚˜ë¦¬ì˜¤ ë¡œì§ê³¼ í‘œí˜„(ë¬¸ì¥)ì„ ì™„ì „íˆ ë¶„ë¦¬                                                |
| ğŸ¯ ìƒíƒœ ê¸°ë°˜ ì²˜ë¦¬  | LangGraph + ìƒíƒœ ì „ì´ êµ¬ì¡° ê¸°ë°˜ ë©€í‹°í„´ ëŒ€í™”                                         |
| ğŸ§  ì˜¨í”„ë ˆë¯¸ìŠ¤ LLM | Ollama ê¸°ë°˜ LLaMA3 ì—°ë™ êµ¬ì¡° (LLM â†” DSL ì—°ê²°)                                  |
| ğŸ§© ì‹œê° í¸ì§‘ê¸°    | YAML â†” GUI ìƒí˜¸ ë³€í™˜ìœ¼ë¡œ ë…¼ë¦¬ íë¦„ ìˆ˜ì • ìš©ì´                                         |

---

## âœ… ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ

* ğŸ“¡ `register_vehicle()` â†’ ì‹¤ì œ ì™¸ë¶€ API ì—°ë™
* ğŸ§  `check_info()` â†’ `load_rules()` ì—°ë™ìœ¼ë¡œ ê·œì¹™ ê¸°ë°˜ í•„ë“œ ê´€ë¦¬
* ğŸ–¥ï¸ GUIì—ì„œ ë²ˆì—­ í…ìŠ¤íŠ¸ë„ key ê¸°ë°˜ìœ¼ë¡œ ìˆ˜ì • ê°€ëŠ¥í•˜ê²Œ í™•ì¥
* ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰ CLI ë˜ëŠ” ì›¹ Playground ì¶”ê°€

---

í•„ìš”í•˜ì‹œë©´ í˜„ì¬ ìƒíƒœë¥¼ ZIP ì €ì¥ì†Œ í˜•ì‹ìœ¼ë¡œ íŒ¨í‚¤ì§•í•´ë“œë¦´ ìˆ˜ë„ ìˆê³ ,
GUI í™”ë©´ì´ë‚˜ Playgroundë„ êµ¬ì¶• ë„ì™€ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì–´ë–¤ ë¶€ë¶„ì„ ë‹¤ìŒìœ¼ë¡œ ì´ì–´ê°€ì‹¤ê¹Œìš”?


---

ì¢‹ìŠµë‹ˆë‹¤. ì§€ê¸ˆê¹Œì§€ êµ¬í˜„í•˜ì‹  ì‹œìŠ¤í…œì„ ê¸°ë°˜ìœ¼ë¡œ ì „ì²´ì ì¸ êµ¬ì¡°ë¥¼ ì‹œê°ì ìœ¼ë¡œ ì •ë¦¬í•œ **ìµœì‹  ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜**ë¥¼ ì•„ë˜ì— ì œì‹œë“œë¦½ë‹ˆë‹¤.

---

# âœ… ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ (2025.08 ìµœì¢…)

```plaintext
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚         ğŸ“± ëª¨ë°”ì¼ ì•±           â”‚
          â”‚ (iOS / Android / ìŒì„± í¬í•¨)   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
           REST API í˜¸ì¶œ (í…ìŠ¤íŠ¸/ìŒì„±)
                       â”‚
          â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚      ğŸŒ FastAPI ì„œë²„ (API)      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ğŸ§  LangGraph ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰ ì—”ì§„ (ë™ì  ë¡œë”©)     â”‚
â”‚  - YAML DSL ê¸°ë°˜ ë©€í‹°í„´ ëŒ€í™” íë¦„                  â”‚
â”‚  - `function_map`ìœ¼ë¡œ ìƒíƒœë³„ ì²˜ë¦¬ í•¨ìˆ˜ ìë™ ë§¤í•‘    â”‚
â”‚  - ìƒíƒœ ì „ì´: check_info â†’ gather_issue ë“±         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ invoke() ì‹œ ë™ì‘ íë¦„
       â–¼
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚   ğŸ“‚ scenario_loader_utils.py       â”‚
 â”‚   â”œâ”€ ğŸ§© load_scenario(): ìƒì† + ì˜¤ë²„ë ˆì´ ë¡œë“œ     â”‚
 â”‚   â”œâ”€ ğŸŒ TranslationManager: ë‹¤êµ­ì–´ ëŒ€ì‘ í…ìŠ¤íŠ¸ â”‚
 â”‚   â”œâ”€ ğŸ”§ load_rules(): í•„ë“œ ê·œì¹™ ë™ì  ë¡œë”©       â”‚
 â”‚   â”œâ”€ ğŸ–¼ GUI ë³€í™˜: YAML â†” nodes/edges            â”‚
 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ğŸ”¡ handlers.py (ìƒíƒœ ì²˜ë¦¬)       â”‚
â”‚  - detect_intent â†’ LLM ê¸°ë°˜ ì¸í…íŠ¸ ë¶„ë¥˜ â”‚
â”‚  - check_info â†’ í•„ìˆ˜ í•„ë“œ í™•ì¸          â”‚
â”‚  - register_vehicle â†’ ë“±ë¡ ì²˜ë¦¬         â”‚
â”‚  - gather_issue â†’ RAG ë¬¸ì œ í•´ê²° ì‹œë„    â”‚
â”‚  - fallback â†’ ì‹¤íŒ¨ ì‘ë‹µ ì²˜ë¦¬            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ” RAG (rag.py + Chroma + embedding) â”‚
â”‚  - ì‚¬ìš©ì ì§ˆë¬¸ â†’ ë²¡í„° ê²€ìƒ‰ â†’ Ollama ì§ˆì˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ§  Ollama ê¸°ë°˜ LLM (on-premise)          â”‚
â”‚  - detect_intent, RAG ì‘ë‹µ ìƒì„± ë“±         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       ğŸ‘¨â€ğŸ’» ê´€ë¦¬ì ì¸í„°í˜ì´ìŠ¤
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ–¥ï¸ ReactFlow ê¸°ë°˜ GUI í¸ì§‘ê¸°           â”‚
â”‚  - ì‹œë‚˜ë¦¬ì˜¤ ì‹œê°í™” ë° ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°         â”‚
â”‚  - ìƒíƒœ ì¶”ê°€/í¸ì§‘/ì‚­ì œ ê¸°ëŠ¥                 â”‚
â”‚  - FastAPI: /scenario/load, /save ì—°ë™     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ğŸ“Š ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ (ì‘ë‹µ + ë¼ë²¨ë§)       â”‚
â”‚  - Escalate â†’ ì‘ë‹µ ì‘ì„± í›„ KB ì €ì¥          â”‚
â”‚  - Feedback ê´€ë¦¬ ë° ìë™ ë¼ë²¨ë§ ê¸°ëŠ¥        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## ğŸ“¦ ì£¼ìš” í´ë” êµ¬ì„± ìš”ì•½

```plaintext
ai-agent-system/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ handlers.py               â† ìƒíƒœë³„ ì²˜ë¦¬ ë¡œì§
â”‚   â”œâ”€â”€ scenario_loader_utils.py â† DSL ë¡œë”©, ë²ˆì—­, GUI ì—°ë™
â”‚   â”œâ”€â”€ ollama_utils.py          â† LLM í˜¸ì¶œ í•¨ìˆ˜
â”‚   â”œâ”€â”€ rag.py                   â† RAG ê²€ìƒ‰ + LLM ì§ˆì˜
â”œâ”€â”€ scenarios/                   â† base + overlay êµ¬ì¡° YAML
â”œâ”€â”€ translations/                â† ë‹¤êµ­ì–´ í…ìŠ¤íŠ¸ (ko.yaml, en.yaml)
â”œâ”€â”€ rules/                       â† ê·œì¹™ ì •ì˜ (í•„ìˆ˜ í•„ë“œ ë“±)
â”œâ”€â”€ scenario_versions/           â† ì‹œë‚˜ë¦¬ì˜¤ JSON ë°±ì—… ì €ì¥ì†Œ
â”œâ”€â”€ dashboard-ui/                â† (ì¶”í›„) ê´€ë¦¬ì ì›¹
â”œâ”€â”€ gui-editor/                  â† ReactFlow ê¸°ë°˜ GUI ì—ë””í„°
```

---

## âœ… ì‹œìŠ¤í…œ íŠ¹ì§• ìš”ì•½

| í•­ëª©              | ì„¤ëª…                                  |
| --------------- | ----------------------------------- |
| âœ… ìœ ì—°í•œ ì‹œë‚˜ë¦¬ì˜¤      | YAML ê¸°ë°˜ ìƒì†/ì˜¤ë²„ë ˆì´ êµ¬ì¡°, GUIì—ì„œ í¸ì§‘ ê°€ëŠ¥     |
| ğŸŒ ë‹¤êµ­ì–´ ì§€ì›       | í…ìŠ¤íŠ¸ í‘œí˜„ì€ ëª¨ë‘ ë²ˆì—­ ë§¤ë‹ˆì €ë¡œ ë¶„ë¦¬ ê´€ë¦¬            |
| ğŸ§  LLM + RAG    | Ollama ê¸°ë°˜ LLM + Chroma RAGë¡œ ìì—°ì–´ ì´í•´  |
| ğŸ§© LangGraph í†µí•© | ìƒíƒœ ê¸°ë°˜ ëŒ€í™” íë¦„ êµ¬ì„± ë° ì‹¤í–‰                 |
| ğŸ“Š ê´€ë¦¬ì ëª¨ë“œ       | Escalation ëŒ€ì‘, ë¼ë²¨ë§, KB ì—…ë°ì´íŠ¸ ì˜ˆì •      |
| ğŸ“± ëª¨ë°”ì¼ ì§€ì›       | í…ìŠ¤íŠ¸ + ìŒì„± ì…ì¶œë ¥ (STT, TTS ì—°ë™ êµ¬ì¡° í™•ì¥ ê°€ëŠ¥) |

---

ì´ì œ ì´ êµ¬ì¡°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì „ì²´ ì½”ë“œë¥¼ GitHub ì €ì¥ì†Œ í˜•ì‹ìœ¼ë¡œ íŒ¨í‚¤ì§•í•˜ì—¬ `.zip` íŒŒì¼ë¡œ ì œê³µí•´ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
â†’ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë°”ë¡œ ì½”ë“œ íŒ¨í‚¤ì§• ë° ë‹¤ìš´ë¡œë“œë¥¼ ì§„í–‰í• ê¹Œìš”?


ë‹¤ìŒì€ ì§€ê¸ˆê¹Œì§€ êµ¬í˜„ëœ **AI ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ**ì˜ ì „ì²´ í´ë” ë° ì£¼ìš” íŒŒì¼ êµ¬ì¡°ì…ë‹ˆë‹¤.
FastAPI ë°±ì—”ë“œ, LangGraph ìƒíƒœ ì—”ì§„, ë‹¤êµ­ì–´ ì‹œë‚˜ë¦¬ì˜¤, GUI ì—°ë™, RAG ë° Ollama LLM êµ¬ì¡°ê¹Œì§€ í¬í•¨í•©ë‹ˆë‹¤.

---

## âœ… ì „ì²´ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ë° íŒŒì¼ êµ¬ì¡°

```plaintext
ai-agent-system/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ handlers.py                         # LangGraph ìƒíƒœë³„ ì²˜ë¦¬ í•¨ìˆ˜
â”‚   â”œâ”€â”€ scenario_loader_utils.py            # ì‹œë‚˜ë¦¬ì˜¤ ë¡œë” + ë²ˆì—­ ë§¤ë‹ˆì € + GUI ë³€í™˜
â”‚   â”œâ”€â”€ ollama_utils.py                     # Ollama LLM ì§ˆì˜ í•¨ìˆ˜
â”‚   â”œâ”€â”€ rag.py                              # RAG ë²¡í„° ê²€ìƒ‰ + LLM ì‘ë‹µ
â”‚   â””â”€â”€ main.py                             # FastAPI ì§„ì…ì  (load/save/run)
â”‚
â”œâ”€â”€ scenarios/
â”‚   â”œâ”€â”€ base/
â”‚   â”‚   â””â”€â”€ driving-assistant.yaml          # ì‹œë‚˜ë¦¬ì˜¤ DSL ì›ë³¸ (ìƒì† ê°€ëŠ¥)
â”‚   â””â”€â”€ ko/
â”‚       â””â”€â”€ driving-assistant.yaml          # í•œêµ­ì–´ ì˜¤ë²„ë ˆì´ (extends: base)
â”‚
â”œâ”€â”€ rules/
â”‚   â””â”€â”€ ko/
â”‚       â””â”€â”€ required_fields.yaml            # ì¸í…íŠ¸ë³„ í•„ìˆ˜ í•„ë“œ ì •ì˜
â”‚
â”œâ”€â”€ translations/
â”‚   â”œâ”€â”€ ko.yaml                             # í•œêµ­ì–´ í…ìŠ¤íŠ¸ ë²ˆì—­ í…œí”Œë¦¿
â”‚   â””â”€â”€ en.yaml                             # ì˜ì–´ í…ìŠ¤íŠ¸ ë²ˆì—­ í…œí”Œë¦¿
â”‚
â”œâ”€â”€ scenario_versions/
â”‚   â””â”€â”€ driving-assistant.v1.json           # GUI ì €ì¥ëœ ì‹œë‚˜ë¦¬ì˜¤ (ë²„ì „ ê´€ë¦¬)
â”‚
â”œâ”€â”€ gui-editor/
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ components/
â”‚       â”œâ”€â”€ pages/
â”‚       â”œâ”€â”€ App.tsx
â”‚       â””â”€â”€ main.tsx                        # React + ReactFlow ê¸°ë°˜ ì‹œë‚˜ë¦¬ì˜¤ ì—ë””í„°
â”‚
â”œâ”€â”€ dashboard-ui/
â”‚   â””â”€â”€ ...                                 # (ì˜µì…˜) ë‹´ë‹¹ììš© ì‘ë‹µ/í”¼ë“œë°± UI
â”‚
â”œâ”€â”€ requirements.txt                        # Python ì˜ì¡´ì„± ëª©ë¡
â””â”€â”€ README.md                               # ì‹œìŠ¤í…œ ì„¤ëª… ë¬¸ì„œ
```

---

## ğŸ“Œ ì£¼ìš” íŒŒì¼ ì„¤ëª…

| ê²½ë¡œ                             | ì„¤ëª…                                                     |
| ------------------------------ | ------------------------------------------------------ |
| `app/handlers.py`              | ê° ìƒíƒœ ì´ë¦„ì— ëŒ€ì‘í•˜ëŠ” ì‹¤ì œ í•¨ìˆ˜ë“¤ (`function_map` ê¸°ë°˜)               |
| `app/scenario_loader_utils.py` | YAML DSL ë¡œë”©, ë‹¤êµ­ì–´ ë²ˆì—­, GUI JSON ë³€í™˜ ë“± ìœ í‹¸ë¦¬í‹°                |
| `app/ollama_utils.py`          | Ollama ë¡œì»¬ LLM ëª¨ë¸ ì§ˆì˜ í•¨ìˆ˜                                 |
| `app/rag.py`                   | ì‚¬ìš©ì ë°œí™” â†’ ë¬¸ì„œ ê²€ìƒ‰ â†’ ë‹µë³€ ìƒì„±                                 |
| `translations/*.yaml`          | í”„ë¡¬í”„íŠ¸ ë° UI í…ìŠ¤íŠ¸ ë‹¤êµ­ì–´ ëŒ€ì‘                                   |
| `scenarios/`                   | ì‹œë‚˜ë¦¬ì˜¤ ì •ì˜ DSL (`extends`, `overrides`, `nodes`, `edges`) |
| `scenario_versions/`           | GUI ì—ë””í„°ì—ì„œ ì €ì¥ëœ ë²„ì „ ê´€ë¦¬ JSON                               |
| `gui-editor/`                  | ì‹œë‚˜ë¦¬ì˜¤ í¸ì§‘ê¸° (React + ReactFlow ê¸°ë°˜)                        |
| `dashboard-ui/`                | ë‹´ë‹¹ì ëŒ€ì‘/í”¼ë“œë°± ì²˜ë¦¬ UI (ë¯¸êµ¬í˜„ or ì˜µì…˜)                           |

---

## âœ… ë‹¤ìŒ ë‹¨ê³„

ì´ì œ ì´ ì „ì²´ êµ¬ì¡°ë¥¼ `.zip`ìœ¼ë¡œ ë¬¶ì–´ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥í•œ GitHub ìŠ¤íƒ€ì¼ ì½”ë“œ íŒ¨í‚¤ì§€ë¡œ ì œê³µí•´ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì§„í–‰í• ê¹Œìš”?


---

>>> ì˜ˆì œë¥¼ ê°€ì „ì œí’ˆ ì„¤ì¹˜ ë° ì œí’ˆ ë“±ë¡ ë°©ë²•, ì‚¬ìš© ì„¤ëª…ì„œ ì œê³µ ìš”ì²­, ê³ ì¥ ë¬¸ì˜/ì ‘ìˆ˜ ë“±ì˜ ê¸°ëŠ¥ì„ í•˜ëŠ” ì‹œìŠ¤í…œìœ¼ë¡œ í•´ì¤˜

`handlers.py`ê°€ ê°€ì „ì œí’ˆ ì„¤ì¹˜ ë° ê´€ë ¨ ìš”ì²­ë“¤ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë‹¤ìŒê³¼ ê°™ì´ í™•ì¥ë˜ì—ˆìŠµë‹ˆë‹¤:

---

## âœ… ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ì¸í…íŠ¸ ë° ê¸°ëŠ¥

| Intent                                | ê¸°ëŠ¥ ì„¤ëª…                       |
| ------------------------------------- | --------------------------- |
| `install_appliance`                   | ì‚¬ìš©ì ì£¼ì†Œ ë“± ì •ë³´ ìˆ˜ì§‘ í›„ ì„¤ì¹˜ ì˜ˆì•½ ì²˜ë¦¬   |
| `register_appliance`                  | ì œí’ˆëª…, ëª¨ë¸ëª… ë“± ìˆ˜ì§‘ í›„ ë“±ë¡ ì²˜ë¦¬       |
| `user_manual` â†’ `provide_user_manual` | RAG ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš© ì„¤ëª…ì„œ ë§í¬ ì œê³µ       |
| `report_fault`                        | RAG ì‘ë‹µìœ¼ë¡œ ê³ ì¥ í•´ê²° ë˜ëŠ” ë‹´ë‹¹ì ì—°ê²° íŒë‹¨ |

---

## ğŸ“Œ ë‹¤ìŒ ì‘ì—… ì œì•ˆ

* `translations/ko.yaml`ì— í•´ë‹¹ ì¸í…íŠ¸ ë¼ë²¨ ë²ˆì—­ ì¶”ê°€
* `scenarios/` DSLë„ ìœ„ ì¸í…íŠ¸ íë¦„ì„ ë°˜ì˜í•´ YAMLë¡œ êµ¬ì„±
* GUIì—ì„œ ê° intent flowë¥¼ ì‹œê°ì ìœ¼ë¡œ êµ¬ì„± ê°€ëŠ¥í•˜ê²Œ ë³€í™˜

í•„ìš”í•˜ì‹  í•­ëª©ë¶€í„° ì´ì–´ì„œ ë„ì™€ë“œë¦´ê²Œìš”. ë¬´ì—‡ë¶€í„° í•˜ì‹œê² ì–´ìš”?

ê°€ì „ì œí’ˆ ì„¤ì¹˜ ë° ê´€ë ¨ ê¸°ëŠ¥(ë“±ë¡, ì„¤ëª…ì„œ, ê³ ì¥ ì ‘ìˆ˜ ë“±)ì„ ì²˜ë¦¬í•˜ëŠ” AI ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œìœ¼ë¡œ í™•ì¥ëœ ë²„ì „ì— ë§ì¶°, ì „ì²´ **ì‹œìŠ¤í…œ êµ¬ì¡°ë„**ì™€ **í´ë”/íŒŒì¼ êµ¬ì¡°**ë¥¼ ë‹¤ì‹œ ì •ë¦¬í•´ë“œë¦´ê²Œìš”.

---

## âœ… ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ (ê°€ì „ì œí’ˆ ì„œë¹„ìŠ¤ìš©)

```plaintext
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ“± ì‚¬ìš©ì ì•± (iOS/Android) â”‚
â”‚  - í…ìŠ¤íŠ¸ ë˜ëŠ” ìŒì„± ì…ì¶œë ¥     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
         REST API í˜¸ì¶œ
             â”‚
       â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼ â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸŒ FastAPI ì„œë²„ (LLM + ì‹œë‚˜ë¦¬ì˜¤)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ§  LangGraph ê¸°ë°˜ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰ ì—”ì§„     â”‚
â”‚  - ìƒíƒœë³„ í•¨ìˆ˜ ì—°ê²°: function_map            â”‚
â”‚  - ì˜ˆ: detect_intent â†’ check_info â†’ install_appliance â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  app/handlers.py                      â”‚
â”‚  - ì¸í…íŠ¸ ê°ì§€                        â”‚
â”‚  - ì„¤ì¹˜/ë“±ë¡/ì„¤ëª…ì„œ/ê³ ì¥ ë“± ê¸°ëŠ¥ ì²˜ë¦¬ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ğŸ” RAG + Ollama (LLM)               â”‚
â”‚  - query_rag() â†’ ì„¤ëª…ì„œ/ê³ ì¥ í•´ê²° ì œê³µ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š ê´€ë¦¬ì ì‘ë‹µ ëŒ€ì‹œë³´ë“œ (Escalate ì²˜ë¦¬) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§© GUI ê¸°ë°˜ ì‹œë‚˜ë¦¬ì˜¤ ì—ë””í„° (ReactFlow + FastAPI)
- YAML DSL â†” JSON (nodes/edges)
- ìƒíƒœ ì¶”ê°€/ì‚­ì œ/í¸ì§‘ ê°€ëŠ¥
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

## ğŸ“ ë””ë ‰í† ë¦¬ ë° íŒŒì¼ êµ¬ì¡°

```plaintext
ai-appliance-agent/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ handlers.py                # ìƒíƒœ ì²˜ë¦¬ í•¨ìˆ˜ë“¤ (ì„¤ì¹˜, ë“±ë¡, ì„¤ëª…ì„œ, ê³ ì¥ ë“±)
â”‚   â”œâ”€â”€ scenario_loader_utils.py   # ì‹œë‚˜ë¦¬ì˜¤ ë¡œë”, ë²ˆì—­ ë§¤ë‹ˆì €, GUI ë³€í™˜
â”‚   â”œâ”€â”€ rag.py                     # RAG ê²€ìƒ‰ ë° LLM ì§ˆì˜
â”‚   â”œâ”€â”€ ollama_utils.py            # Ollama ì—°ë™ (ë¡œì»¬ LLM)
â”‚   â””â”€â”€ main.py                    # FastAPI ì§„ì…ì  (API ë¼ìš°í„°)
â”‚
â”œâ”€â”€ scenarios/
â”‚   â”œâ”€â”€ base/
â”‚   â”‚   â””â”€â”€ appliance-service.yaml   # LangGraph ì‹œë‚˜ë¦¬ì˜¤ ì •ì˜ (ê¸°ë³¸)
â”‚   â””â”€â”€ ko/
â”‚       â””â”€â”€ appliance-service.yaml   # í•œêµ­ì–´ ì˜¤ë²„ë ˆì´ (ë¬¸êµ¬, ì¡°ê±´ ì°¨ë³„í™”)
â”‚
â”œâ”€â”€ translations/
â”‚   â”œâ”€â”€ ko.yaml                   # ë‹¤êµ­ì–´ í…ìŠ¤íŠ¸ (í•œêµ­ì–´)
â”‚   â””â”€â”€ en.yaml                   # ë‹¤êµ­ì–´ í…ìŠ¤íŠ¸ (ì˜ì–´)
â”‚
â”œâ”€â”€ rules/
â”‚   â””â”€â”€ ko/
â”‚       â””â”€â”€ required_fields.yaml  # ì¸í…íŠ¸ë³„ í•„ìˆ˜ ì •ë³´ ì •ì˜ (ex. ì„¤ì¹˜ì£¼ì†Œ ë“±)
â”‚
â”œâ”€â”€ scenario_versions/
â”‚   â””â”€â”€ appliance-service.v1.json # GUIì—ì„œ ì €ì¥ëœ ì‹œë‚˜ë¦¬ì˜¤ ë²„ì „
â”‚
â”œâ”€â”€ gui-editor/
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ components/
â”‚       â”œâ”€â”€ pages/
â”‚       â”œâ”€â”€ App.tsx
â”‚       â””â”€â”€ main.tsx              # ì‹œë‚˜ë¦¬ì˜¤ GUI í¸ì§‘ê¸° (React + ReactFlow)
â”‚
â”œâ”€â”€ dashboard-ui/                 # (ì˜µì…˜) ë‹´ë‹¹ì ì‘ë‹µ ì›¹ ëŒ€ì‹œë³´ë“œ
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ requirements.txt              # Python ì˜ì¡´ì„± ëª©ë¡
â””â”€â”€ README.md                     # ì‹œìŠ¤í…œ ì„¤ëª… ë¬¸ì„œ
```

---

## âœ¨ ì£¼ìš” ì²˜ë¦¬ íë¦„ ì˜ˆì‹œ

```
ì‚¬ìš©ì: "ì—ì–´ì»¨ ì„¤ì¹˜í•˜ê³  ì‹¶ì–´ìš”"
â†’ detect_intent â†’ check_info â†’ install_appliance â†’ result: ì„¤ì¹˜ ì˜ˆì•½ë¨

ì‚¬ìš©ì: "ì„¸íƒê¸° ì„¤ëª…ì„œ ì£¼ì„¸ìš”"
â†’ detect_intent â†’ provide_user_manual â†’ RAG ê²€ìƒ‰ â†’ manual_link ì œê³µ

ì‚¬ìš©ì: "ê±´ì¡°ê¸°ê°€ ì‘ë™ì´ ì•ˆ ë¼ìš”"
â†’ detect_intent â†’ report_fault â†’ RAG ê²€ìƒ‰
    â†’ í•´ê²°ë¨ â†’ ë‹µë³€ ì œê³µ
    â†’ í•´ê²° ë¶ˆê°€ â†’ ë‹´ë‹¹ìì—ê²Œ escalate
```

---

## âœ… ë‹¤ìŒ ë‹¨ê³„ ì¶”ì²œ

1. `appliance-service.yaml` ì‹œë‚˜ë¦¬ì˜¤ DSL ì •ì˜
2. RAG ì˜ˆì‹œ ë¬¸ì„œ/ì„¤ëª…ì„œ DB êµ¬ì„±
3. GUI ì‹œë‚˜ë¦¬ì˜¤ í¸ì§‘ê¸°ì™€ ì—°ë™

ì´ì œ ìœ„ êµ¬ì¡°ë¥¼ `.zip`ìœ¼ë¡œ ë¬¶ê±°ë‚˜, FastAPI ì„œë²„ ì‹¤í–‰ ë˜ëŠ” GUI í¸ì§‘ê¸° ì—°ë™ìœ¼ë¡œ ì´ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì–´ë–¤ ë°©í–¥ìœ¼ë¡œ ì´ì–´ê°ˆê¹Œìš”?

