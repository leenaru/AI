이제 LangGraph 기반의 완전한 대화형 요구사항 분석 및 Jira 티켓 생성 에이전트를 완성했습니다!

## 주요 특징

### 🔄 **LangGraph 워크플로우**
- **상태 기반 플로우**: 각 단계별로 상태를 관리하며 체계적으로 진행
- **조건부 분기**: 요구사항 완성도에 따라 다른 경로로 진행
- **체크포인팅**: 대화 상태를 저장하여 중단된 지점에서 재개 가능

### 💬 **대화형 상호작용**
1. **내용 부족 감지**: LLM이 요구사항의 신뢰도를 평가하여 추가 정보 필요성 판단
2. **구체적 질문 생성**: 부족한 부분에 대해 구체적이고 명확한 질문 제시
3. **사용자 피드백 반영**: 답변을 분석하여 요구사항 품질 개선

### ✅ **사용자 확인 단계**
- 최종 티켓 생성 전 상세한 미리보기 제공
- 사용자 승인 후에만 실제 Jira 티켓 생성
- 수정이 필요한 경우 다시 질문 단계로 돌아가기

## 설치 및 실행

```bash
# 필수 패키지 설치
pip install langgraph langchain-openai langchain-core atlassian-python-api beautifulsoup4 fastapi uvicorn

# 환경 변수 설정
export CONFLUENCE_URL="https://your-domain.atlassian.net/wiki"
export CONFLUENCE_USERNAME="your-email@company.com"
export CONFLUENCE_TOKEN="your-confluence-api-token"
export JIRA_URL="https://your-domain.atlassian.net"
export JIRA_USERNAME="your-email@company.com" 
export JIRA_TOKEN="your-jira-api-token"
export OPENAI_API_KEY="sk-..."

# 실행 방법
python agent.py interactive  # 대화형 CLI
python agent.py web         # 웹 인터페이스 
python agent.py single      # 단일 실행
```

## 워크플로우 단계별 설명

### 1. **Confluence 페이지 가져오기** 📄
- 페이지 ID 추출 및 검증
- 페이지 내용과 메타데이터 수집

### 2. **초기 요구사항 분석** 🔍
- LLM이 문서 내용 분석
- 각 요구사항에 신뢰도 점수 부여
- 부족한 정보 식별

### 3. **완성도 검사** ⚡
- 신뢰도 < 0.7인 요구사항 식별
- 추가 정보가 필요한 항목들 수집

### 4. **사용자와 대화** 💬
```
🤔 다음 사항들에 대해 추가 정보가 필요합니다:

1. 사용자 로그인 기능: 구체적인 인증 방식을 알려주세요
2. 데이터베이스 연동: 어떤 데이터베이스를 사용할 예정인가요?
3. 권한 관리: 사용자 역할과 권한 체계에 대해 설명해주세요

각 항목에 대해 답변해주세요.
```

### 5. **요구사항 개선** 🔧
- 사용자 답변을 반영하여 요구사항 업데이트
- 신뢰도 점수 재계산

### 6. **최종 확인** ✅
```
📋 최종 티켓 생성 확인

다음 5개의 Jira 티켓을 생성할 예정입니다:

1. 사용자 로그인 시스템 구현
   - 타입: Story
   - 우선순위: High
   - 스토리 포인트: 5
   - 설명: OAuth 2.0 기반 로그인 시스템 구현...

티켓을 생성하시겠습니까? (예/아니오)
```

### 7. **Jira 티켓 생성** 🎫
- Epic 자동 생성
- 개별 Story/Task 생성
- 생성 결과 리포팅

## 사용 시나리오 예시

### **시나리오: 전자상거래 플랫폼 기획서 분석**

```
👤 123456789

🤖 ✅ 페이지 '전자상거래 플랫폼 요구사항'을 성공적으로 가져왔습니다. 
    요구사항 분석을 시작합니다...

🤖 📊 초기 분석 완료: 8개의 요구사항을 발견했습니다.

🤖 🤔 다음 사항들에 대해 추가 정보가 필요합니다:

    1. 결제 시스템: 지원할 결제 방식과 PG사를 구체적으로 알려주세요
    2. 재고 관리: 실시간 재고 업데이트 방식과 알림 기준을 설명해주세요
    3. 사용자 등급 시스템: 등급별 혜택과 승급 조건을 명시해주세요

👤 1. 카드결제(토스페이), 계좌이체, 카카오페이 지원 예정
    2. 재고 10개 이하시 알림, 실시간 API 연동
    3. 브론즈/실버/골드 등급, 구매금액 기준으로 승급

🤖 ✅ 추가 정보를 반영하여 요구사항을 업데이트하고 있습니다...

🤖 📋 최종 티켓 생성 확인

    다음 8개의 Jira 티켓을 생성할 예정입니다:
    
    1. 다중 결제 시스템 구현
       - 타입: Epic  
       - 우선순위: Highest
       - 설명: 토스페이, 계좌이체, 카카오페이 연동...

👤 예

🤖 🎉 티켓 생성 완료!
    
    📈 에픽: ECOM-123
    ✅ 성공적으로 생성된 티켓: 8개
    - ECOM-124: 다중 결제 시스템 구현
    - ECOM-125: 실시간 재고 관리 시스템
    - ECOM-126: 사용자 등급 시스템
    ...
```

이 에이전트는 단순한 자동화를 넘어서 실제로 사용자와 대화하며 요구사항의 품질을 높이고, 완성도 있는 Jira 티켓을 생성하는 지능형 어시스턴트 역할을 수행합니다!
